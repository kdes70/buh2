
<!DOCTYPE html>
<html >
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta content='width=1024' name='viewport'>


    <title>Иерархические (рекурсивные) запросы / Хабрахабр</title>

    <meta name='yandex-verification' content='67d46b975fa41645' /> <!-- яндекс вебмастер - верификация -->

    <meta name="description" content=" 

Чтобы понять рекурсию, сначала надо понять рекурсию. Возможно, поэтому рекурсивные запросы применяют так редко. Наверняка вы представляете что такое SQL-запрос, я расскажу, чем рекурсивные..." />
    <meta name="keywords" content="sql, SQL-1999, mysql, oracle, иерархия, рекурсия" />

    	<meta property="fb:app_id"      content="444736788986613" /> 
<meta property="og:type"        content="article" /> 
<meta property="og:url"         content="http://habrahabr.ru/post/43955/" /> 
<meta property="og:title"       content="Иерархические (рекурсивные) запросы" />
	<meta property="og:image"       content="http://savepic.ru/320213.png" />
	<link rel="image_src" href="http://savepic.ru/320213.png" /><meta property="og:image"       content="http://savepic.ru/314069.gif" />
	<link rel="image_src" href="http://savepic.ru/314069.gif" />
	
<meta property="og:description" content="Чтобы понять рекурсию, сначала надо понять рекурсию. Возможно, поэтому рекурсивные запросы применяют так редко. Наверняка вы представляете что такое..." />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@habrahabr" />
	<meta property="al:ios:url" content="habrahabr://post/43955" />
<meta property="al:ios:app_store_id" content="778613673" />
<meta property="al:ios:app_name" content="Habrahabr" />
<meta property="al:android:url" content="habrahabr://post/43955" />
<meta property="al:android:app_name" content="Habrahabr" />
<meta property="al:android:package" content="ru.habrahabr" />
<meta property="al:windows_phone:url" content="habrahabr://post/43955" />
<meta property="al:windows_phone:app_name" content="Habrahabr" />
<meta property="al:windows_phone:app_id" content="460a6bd6-8955-470f-935e-9ea1726a6060" />
	<link rel="canonical" href="http://habrahabr.ru/post/43955/"/>
    <link rel="alternate" media="only screen and (max-width: 640px)" href="http://m.habrahabr.ru/post/43955/" >




    <link href="/styles/1435178010/assets/global_main.css" rel="stylesheet" media="all" />
    <script type="text/javascript" src="/javascripts/1435178010/assets/global_main.js"></script>
        <link href="/styles/1435178010/assets/post_common_css.css" rel="stylesheet" media="all" />
    <link href="/styles/1435178010/users/all.css" rel="stylesheet" media="all" />

    <link href="/styles/1435178010/printer.css" rel="stylesheet" media="print" />

    
    




        <script type="text/javascript" src="/javascripts/1435178010/assets/post_common_js.js"></script>
    <script type="text/javascript" src="/javascripts/1435178010/users/all.js"></script>


      <!-- www.criteo.com/ru -->
<script type='text/javascript'>
  var crtg_nid="2580";
  var crtg_cookiename="cto_rtt";
  var crtg_varname="crtg_content";
  function crtg_getCookie(c_name){
    var i,x,y,ARRCookies=document.cookie.split(";");
    for(i=0;i<ARRCookies.length;i++){
      x=ARRCookies[i].substr(0,ARRCookies[i].indexOf("="));
      y=ARRCookies[i].substr(ARRCookies[i].indexOf("=")+1);
      x=x.replace(/^\s+|\s+$/g,"");
      if(x==c_name){return unescape(y);}
    }
    return'';
  }
  var crtg_content = crtg_getCookie(crtg_cookiename);var crtg_rnd=Math.floor(Math.random()*99999999999);
  var crtg_url=location.protocol+'//rtax.criteo.com/delivery/rta/rta.js?netId='+escape(crtg_nid);crtg_url+='&cookieName='+escape(crtg_cookiename);crtg_url+='&rnd='+crtg_rnd;crtg_url+='&varName=' + escape(crtg_varname);
  var crtg_script=document.createElement('script');crtg_script.type='text/javascript';crtg_script.src=crtg_url;crtg_script.async=true;
  if(document.getElementsByTagName("head").length>0)document.getElementsByTagName("head")[0].appendChild(crtg_script);
  else
  if(document.getElementsByTagName("body").length>0)document.getElementsByTagName("body")[0].appendChild(crtg_script);
</script>
      <script >
        var N = 5;
        var ar_duo1 = Math.floor(Math.random()*N+1);
      </script>
      <script type="text/javascript" src="/javascripts/1435178010/adriver.core.2.js"></script>

    <link title="Хабрахабр / Комментарии к публикации «Иерархические (рекурсивные) запросы»" type="application/rss+xml" rel="alternate" href="http://habrahabr.ru/rss/post/43955/"/>

    
<script type="text/javascript">

    var user_type = "guest";

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-726094-1',  'auto' );
    ga('create', 'UA-726094-24', 'auto', {'name': 'HGM'});

  ga('require', 'displayfeatures');
  ga('set', 'dimension1', user_type); // user type - guest/readonly/habrauser
  //ga('set', 'dimension2', username); // username



  if(typeof removeUtms === 'undefined') {
    removeUtms = function(){};
  }
  ga('HGM.send', 'pageview');
  ga('HGM.set', 'dimension1', user_type);
  ga('HGM.set', 'dimension2', "habrahabr");
  ga('send', 'pageview', { 'hitCallback': removeUtms });

</script>


    <meta content='Хабрахабр' name='apple-mobile-web-app-title'>
<link href='/images/apple-touch-icon_142x142.png' rel='apple-touch-icon' type='image/png'>
  </head>

  <body>
    <div id="TMpanel">
  <div class="container">
    <div class="menu">
      <a href="http://tmfeed.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">TM Feed</a>
      <a href="http://habrahabr.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo" class="current">Хабрахабр</a>
      <a href="http://megamozg.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Мегамозг</a>
      <a href="http://geektimes.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Geektimes</a>
      <a href="http://toster.ru?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Тостер</a>
      <a href="http://brainstorage.me?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Brainstorage</a>
      <a href="http://freelansim.ru?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=head_link">Фрилансим</a>
    </div>
      <div class="menu special"></div>
  </div>
</div>


    <div id="layout">
      <div id="navbar_overlay" class="hidden"></div>
<div id="navbar">
    <div class="nav_panel">
        <a href="/" class="logo"></a>

            <a href="/posts/" class="tab tab_menu" data-tab="menu_tab" title="Меню"><span class="g-icon g-icon-burger"></span></a>
            <a href="https://habrahabr.ru/auth/login/" class="tab tab_login" id="login" title="Войти"><span class="g-icon g-icon-lock"></span></a>

        <a href="" class="tab tab_print  hidden" id="print_tab" target="_blank" data-post-id="43955"></a>

        <a href="#" class="scroll_to_up hidden scroll_to_up_for_guest" id="scroll_to_top" title="Наверх"></a>
    </div>
    <div class="nav_tabs_content ">

        <div class="nav_tab hidden" id="menu_tab">
            <div class="title">Разделы</div>
            <form action="/search/" method="get" class="global_search_form">
                <div>
                    <input type="text" name="q" placeholder="Поиск" />
                </div>
            </form>
            <div class="menu">
                <a href="/posts/top/">Публикации</a>
                <a href="/hubs/">Хабы</a>
                <a href="/companies/">Компании</a>
                <a href="/users/">Пользователи</a>
                <a href="http://toster.ru/"    class="new_window">Q&A</a>
                <a href="/sandbox/">Песочница</a>



            </div>

                

                        <div class="line"></div>
                        <div class="title">Спецпроекты</div>
                        <div class="menu">

                        <a href="http://bit.ly/1QLztmW" target="_blank">Shared Hosting</a>

                        <a href="http://bit.ly/1QoqLLg" target="_blank">Деньги на образование</a>

                        <a href="http://bit.ly/1dXmFZx" target="_blank">Деньги IT-стартапам</a>
                        </div>


        </div>


    </div>
</div>

      <div class="inner">
        

        

        
    <div class="user_header">

	<a class="avatar" href="http://habrahabr.ru/users/maovrn/"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26.jpg" alt="avatar" /></a>
	<h2 class="username"><a  href="http://habrahabr.ru/users/maovrn/">maovrn</a></h2>



	<div class="karma">
		<div class="label">карма</div>
		<div class="score">
				

				<div class="num">75,3</div>

				
		</div>
		<div class="votes" >104 голоса</div>
	</div>
	<div class="rating">
		<div class="label">рейтинг</div>
		<div class="num">0,0</div>
	</div>


	<div class="clear"></div>
</div>

  <div class="content_left">
  	
<table class="menu">
    <tr>
        <td class="item ">
            <a href="http://habrahabr.ru/users/maovrn/"  ><span class="name">Профиль</span></a>
        </td>
        <td class="item  active">
            <a href="http://habrahabr.ru/users/maovrn/topics/"  ><span class="name">Публикации (<span class="count">4</span>)</span></a>
        </td>
        <td class="item ">
            <a href="http://habrahabr.ru/users/maovrn/comments/"  ><span class="name">Комментарии (<span class="count">314</span>)</span></a>
        </td>
        <td class="item ">
            <a href="http://habrahabr.ru/users/maovrn/favorites/"  ><span class="name">Избранное (<span class="count">187</span>)</span></a>
        </td>
    </tr>
</table>
<div class="submenu ">

</div>
<div class="clear"></div>



    <div class="post_show">
  	  
  <div class="post shortcuts_item" id="post_43955">
  	<div class="published"> 5 ноября 2008 в 10:44</div>
    <h1 class="title">
	    
        <span class="post_title">Иерархические (рекурсивные) запросы</span>
      
			
  	</h1>

  	<div class="hubs">
		<a href="http://habrahabr.ru/hub/sql/" class="hub " title="Вы не подписаны на этот хаб" >SQL</a><span class="profiled_hub" title="Профильный хаб">*</span>
</div>


  	<div class="content html_format">
    	<img src="http://savepic.ru/320213.png" alt="Дерево объектов"/> <br/>
<br/>
Чтобы понять рекурсию, сначала надо понять рекурсию. Возможно, поэтому рекурсивные запросы применяют так редко. Наверняка вы представляете что такое SQL-запрос, я расскажу, чем рекурсивные запросы отличаются от обычных. Тема получилась объемная, приготовьтесь к долгому чтению. В основном речь пойдет об Oracle, но упоминаются и другие СУБД.<br/>
<br/>
<a name="habracut"></a><br/>
<br/>
<h4>Суть проблемы</h4><br/>
<br/>
Большинство современных СУБД (Система Управления Базами Данных) — реляционные, т.е. представляют данные в виде двумерной таблицы, в которой есть строки (записи) и столбцы (поля записей). Но на практике мы часто сталкиваемся с иной организацией данных, а именно иерархической. <br/>
<br/>
Взгляните на список файлов на вашем компьютере: все они организованы в виде дерева. Аналогично можно представить книги в библиотеке: Библиотека-&gt;Зал-&gt;Шкаф-&gt;Полка-&gt;Книга. То же самое и статьи на сайте: Сайт-&gt;Раздел-&gt;Подраздел-&gt;Статья. Примеры можно приводить долго. Впрочем, тут еще можно разделить все на отдельные таблицы: таблица для хранения списка библиотек, другая таблица для списка залов, третья для шкафов и т.д. Но если заранее не известна глубина вложенности или эта вложенность может меняться, тут уж от иерархии никак не отмашешься.<br/>
<br/>
Проблема в том, что данные, имеющие иерархическую структуру, очень плохо представляются в реляционной модели. В стандарте SQL-92 нет средств для их обработки.<br/>
<br/>
Зато такие средства появились в стандарте SQL-1999. Правда к тому времени в Oracle уже был собственный оператор CONNECT BY. Несмотря на это, в SQL-1999 синтаксис рекурсивных запросов совершенно не похож на синтаксис CONNECT BY в Oracle и использует ключевое слово WITH. Реализация же рекурсивных запросов в других СУБД несколько запоздала, так в MS SQL Server она появилась лишь в версии 2005.<br/>
<br/>
Так же как и в синтаксисе, есть отличия и в терминологии. В Oracle обычно обсуждаемые запросы называются “иерархические”, у всех остальных “рекурсивные”. Суть от этого не меняется, я буду использовать и то и другое.<br/>
<br/>
<h4>От слов к делу!</h4><br/>
<br/>
Для демонстрации будем использовать структуру каталогов, нам потребуется тестовая таблица, состоящая из 3-х полей:<br/>
<b>id</b> – идентификатор,<br/>
<b>pid</b> – идентификатор родителя (ссылается на id другой записи в той же таблице),<br/>
<b>title</b> – название каталога (вместо него может быть что угодно, даже несколько полей или ссылок к другим таблицам).<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">create</font> <font color="#0000ff">table</font> test_table (<br/>
&nbsp;&nbsp;id <font color="#0000ff">int</font>,<br/>
&nbsp;&nbsp;pid <font color="#0000ff">int</font>,<br/>
&nbsp;&nbsp;title <font color="#0000ff">varchar</font>(256)<br/>
);</font></code></blockquote><br/>
<br/>
Здесь я использовал синтаксис mySQL, в других СУБД он несколько отличается. Так, в Oracle используются другие типы данных: вместо int — number, а вместо varchar — varchar2.<br/>
<br/>
Заполнить табличку тестовыми данными не составит труда. Предлагаю записать список серверов, расположенных на территории различных предприятий в разных городах. Таким образом, в единой таблице оказываются и страны, и города, и фирмы, и сервера. <br/>
<br/>
<blockquote><code><font color="black">insert into test_table values (1, <font color="#0000ff">null</font>, <font color="#A31515">'Россия'</font>);</font></code></blockquote><br/>
<br/>
Думаю, остальные строки заполнить не составит сложностей. Получается почти как на картинке, только не в том порядке. Я специально заполнял не по-порядку, чтобы простым SELECT * FROM test_table получалось не иерархическая структура:<br/>
<br/>
<pre>
  ID        PID TITLE
---- ---------- --------------------
   1            Россия
   2          1 Воронеж
   3          2 ООО &quot;Рога и копыта&quot;
   4          1 Москва
   5          1 Лиски
   6          3 Главный офис
   7          3 Офис 1
   8          3 Офис 2
   9          8 Сервер 1
  10          5 ЛискиПресс
</pre><br/>
<br/>
Тестовые данные готовы. Приступим к выборкам.<br/>
<br/>
<h4>mySQL</h4><br/>
<br/>
Вынужден огорчить пользователей mySQL – в этой СУБД придется рекурсию организовывать внешними по отношению к СУБД средствами, например на php (код приводить не буду, его публиковали не раз, например <a href="http://www.codenet.ru/webmast/php/tree.php">здесь</a>, достаточно поискать по запросу “mySQL tree” и т.п.). <br/>
<br/>
Впрочем, есть <a href="http://dev.e-taller.net/dbtree/">иной подход</a>, заключающийся в создании левой и правой границы для каждого узла, предложенный Джо Селко. Тогда можно будет обойтись обычными, не рекурсивными запросами.<br/>
<br/>
Как-то я выводил дерево объектов в действующем проекте на php. База данных была на mySQL. Поплевавшись на отсутствие удобных операторов, я решил тогда не отображать все дерево целиком, а показать пользователю только первый уровень (схлопнутое дерево). При клике по плюсику в узле дерева отображались дочерние узлы для выбранного объекта, при этом они подгружались через AJAX. Выборка дочерних узлов по известному pid происходит быстро, поэтому интерфейс получился вполне шустрым. Возможно, это не лучшее решение, но оно имеет право на жизнь.<br/>
<br/>
<h4>SQL-1999</h4><br/>
<br/>
В отличие от предыдущего стандарта SQL-92, в названии следующего решили отобразить номер тысячелетия, чтобы он не страдал от проблемы двухтысячного года. Помимо этого :-), появились новые типы данных (LOB), новые предикаты SIMILAR и DISTINCT, точки сохранения транзакций, объекты и их методы, и многое другое. Среди нововведений появились также рекурсивные запросы, о которых мы сейчас и поговорим.<br/>
<br/>
Для получения иерархических данных используется временное представление, которое описывается оператором <strong>WITH</strong>. После этого из нее выбираются данные простым селектом. В общем виде синтаксис примерно такой:<br/>
<br/>
<pre>
WITH [recursive] имя_алиаса_запроса [ (список столбцов) ]
AS (запрос) 
основной запрос
</pre><br/>
<br/>
В MS SQL нет ключевого слова <strong>RECURSIVE</strong>, его следует опустить. Но в остальном все то же самое. Такой синтаксис поддерживается в DB2, Sybase iAnywhere, MS SQL, начиная с версии 2005, и во всех базах данных, которые поддерживают стандарт SQL 1999.<br/>
<br/>
Тогда для получения нашего дерева запрос получится такой:<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">WITH</font> <font color="#0000ff">RECURSIVE</font><br/>
&nbsp;Rec (id, pid, title)<br/>
&nbsp;<font color="#0000ff">AS</font> (<br/>
&nbsp;&nbsp;&nbsp;<font color="#0000ff">SELECT</font> id, pid, title <font color="#0000ff">FROM</font> test_table<br/>
&nbsp;&nbsp;&nbsp;<font color="#0000ff">UNION</font> <font color="#0000ff">ALL</font><br/>
&nbsp;&nbsp;&nbsp;<font color="#0000ff">SELECT</font> Rec.id, Rec.pid, Rec.title<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">FROM</font> Rec, test_table<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">WHERE</font> Rec.id = test_table.pid<br/>
&nbsp;&nbsp; )<br/>
&nbsp;<font color="#0000ff">SELECT</font> * <font color="#0000ff">FROM</font> Rec <br/>
&nbsp;<font color="#0000ff">WHERE</font> pid <font color="#0000ff">is</font> <font color="#0000ff">null</font>;</font></code></blockquote><br/>
<br/>
Здесь используется рекурсивная таблица Rec, которую мы сами придумали, построив ее по исходной таблице test_table. В описании Rec указано правило, каким образом соединять: WHERE Rec.id = test_table.pid. А в главном запросе отметили, что начинать надо с записи, у которой pid является пустым, т.е. с корневой записи.<br/>
<br/>
Честно говоря, я никогда не работал в MS SQL Server 2005 или другой СУБД, использующей такой синтаксис. Поэтому написал этот запрос чисто из теоретических соображений. Для общности картины, чтобы было с чем сравнить.<br/>
<br/>
В MS SQL 2008 можно применить более новое средство <a href="http://habrahabr.ru/blogs/sql/27774/">hierarchyid</a>. Спасибо <a href="http://habrahabr.ru/users/xaoccps/" class="user_link">XaocCPS</a> за его описание.<br/>
<br/>
<h4>Oracle</h4><br/>
<br/>
Наконец-то мы добрались до Oracle! Об этой СУБД я хотел бы рассказать поподробнее. В Oracle иерархические запросы появились в 8-ой версии, задолго до появления стандарта. Поэтому до сих пор используется совсем другой синтаксис. Лично мне он кажется более понятным и напоминающим обычные функциональные языки. Хотя, скорее всего, это дело привычки.<br/>
<br/>
Описание синтаксиса в документации напоминает бусы: на единую нить запроса нанизываются нужные операторы. Никому не приходило в голову сделать украшение для гички?<br/>
<br/>
<img src="http://savepic.ru/314069.gif" alt="Структура операторов иерархического запроса в Oracle"/><br/>
<br/>
Тут видно, что единственно важное условие для построения иерархического запроса – это оператор <strong>CONNECT BY</strong>, остальное “нанизывается” по мере надобности. <br/>
<br/>
Необязательный оператор <strong>START WITH</strong> говорит Ораклу с чего начинать цикл, т.е. какая строка (или строки) будет корневой. Условие может быть практически любым, можно даже использовать функции или внутренние запросы: pid is null, или id = 1, или даже substr(title, 1, 1) = ‘Р’.<br/>
<br/>
Условие после CONNECT BY нужно указать обязательно. Тут надо сказать Ораклу, как долго продолжать цикл. Что-то в духе while в обычных языках программирования. Например, мы можем попросить достать нам 10 строк: rownum&lt;=10 – он и нафигачит нам в цикле ровно 10 одинаковых строк. Почему одинаковых? Да потому что мы указали какую строку выбрать первой, а как найти следующую нет – вот он и выдает 1-ую строку нужное количество раз. Кстати сказать, <strong>rownum</strong> это псевдостолбец, в котором нумеруются строки, начиная от 1 в порядке их выдачи. Его можно использовать не только в иерархических запросах. Но это уже другая история.<br/>
<br/>
Как же получить нормальную иерархию? Нужно использовать специальный оператор, который называется <strong>PRIOR</strong>. Это обычный унарный оператор, точно такой же как + или -. “Позвоните родителям” – говорит он, заставляя Оракл обратиться к предыдущей записи. С его помощью можно написать правило pid = PRIOR id (или PRIOR id = pid, как говорится, от перестановки мест…).<br/>
<br/>
Что получается? Оракл находит первую запись, удовлетворяющую условию в START WITH, и принимается искать следующую. При этом к той первой записи можно обратиться через PRIOR. Если мы все сделали правильно, то Оракл будет искать записи, в которых в поле для хранения информации о родителе (pid) будет содержаться значение, равное идентификатору id нашей первой записи. Таким образом будут найдены все потомки корневой записи. А так как процесс рекурсивный, аналогичный поиск будет продолжаться с каждой найденной строкой, пока не отыщутся все потомки. <br/>
<br/>
Теперь у нас есть все необходимое, чтобы написать иерархический запрос в Oracle. Но прежде чем мы его напишем, расскажу еще об одной штуке. Порядок строк это хорошо, но нам было бы трудно понять, две строки рядом это родитель и его потомок или два брата-потомка одного родителя. Пришлось бы сверять id и pid. К счастью, Oracle предлагает в помощь дополнительный псевдостолбец <strong>LEVEL</strong>. Как легко догадаться, в нем записывается уровень записи по отношению к корневой. Так, 1-ая запись будет иметь уровень 1, ее потомки уровень 2, потомки потомков — 3 и т.д.<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">SELECT</font> <font color="#0000ff">level</font>, id, pid, title <br/>
<font color="#0000ff">FROM</font> test_table<br/>
<font color="#0000ff">START</font> <font color="#0000ff">WITH</font> pid <font color="#0000ff">is</font> <font color="#0000ff">null</font><br/>
<font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> <font color="#0000ff">PRIOR</font> id = pid;</font></code></blockquote><br/>
<br/>
<pre>
LEVEL         ID        PID TITLE
------ ---------- ---------- -------------------
     1          1            Россия
     2          2          1 Воронеж
     3          3          2 ООО &quot;Рога и копыта&quot;
     4          6          3 Главный офис
     4          7          3 Офис 1
     4          8          3 Офис 2
     5          9          8 Сервер 1
     2          4          1 Москва
     2          5          1 Лиски
     3         10          5 ЛискиПресс
</pre><br/>
<br/>
Неплохо. Все дочерние строки оказываются под своими родителями. Сортировку бы еще добавить, чтобы записи одного уровня выводились не абы-как, а по алфавиту. Ну чтож, сортировка это просто: добавим в конец запроса конструкцию ORDER BY title.<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">SELECT</font> <font color="#0000ff">level</font>, id, pid, title <br/>
<font color="#0000ff">FROM</font> test_table<br/>
<font color="#0000ff">START</font> <font color="#0000ff">WITH</font> pid <font color="#0000ff">is</font> <font color="#0000ff">null</font><br/>
<font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> <font color="#0000ff">PRIOR</font> id = pid<br/>
<font color="#0000ff">ORDER</font> <font color="#0000ff">BY</font> title;</font></code></blockquote><br/>
<br/>
<pre>
LEVEL         ID        PID TITLE
------ ---------- ---------- -------------------
     2          2          1 Воронеж
     4          6          3 Главный офис
     2          5          1 Лиски
     3         10          5 ЛискиПресс
     2          4          1 Москва
     3          3          2 ООО &quot;Рога и копыта&quot;
     4          7          3 Офис 1
     4          8          3 Офис 2
     1          1            Россия
     5          9          8 Сервер 1
</pre><br/>
<br/>
О, нет! Вся иерархия поломалась. Что же получилось? Оракл честно выбрал нужные строки в порядке иерархии (об этом говорит правильная расстановка level), а затем пересортировал их согласно правилу ORDER BY. Чтобы указать Ораклу, что сортировать надо только в пределах одного уровня иерархии, нам поможет маленькая добавка в виде оператора <strong>SIBLINGS</strong>. Достаточно изменить условие сортировки на ORDER SIBLINGS BY title – и все встанет на свои места.<br/>
<br/>
Кстати, возможно все еще не понятно, почему этот порядок строк является деревом. Можно убрать все “лишние” поля и добавить отступы, станет более наглядно:<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">SELECT</font> lpad(<font color="#A31515">' '</font>, 3*<font color="#0000ff">level</font>)||title <font color="#0000ff">as</font> Tree<br/>
<font color="#0000ff">FROM</font> test_table<br/>
<font color="#0000ff">START</font> <font color="#0000ff">WITH</font> pid <font color="#0000ff">is</font> <font color="#0000ff">null</font><br/>
<font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> <font color="#0000ff">PRIOR</font> id = pid<br/>
<font color="#0000ff">ORDER</font> SIBLINGS <font color="#0000ff">BY</font> title;</font></code></blockquote><br/>
<br/>
<pre>
TREE
-----------------------------
   Россия
      Воронеж
         ООО &quot;Рога и копыта&quot;
            Главный офис
            Офис 1
            Офис 2
               Сервер 1
      Лиски
         ЛискиПресс
      Москва
</pre><br/>
<br/>
Ну вот, теперь все в точности, как на картинке в самом начале статьи.<br/>
<br/>
Помните, файловые менеджеры обычно пишут путь к каталогу, в котором вы находитесь: /home/maovrn/documents/ и т.п.? Неплохо было бы и нам сделать так же. А сделать это можно абсолютно не напрягаясь: специалисты из Oracle все уже сделали за нас. Просто берем и используем функцию <strong>SYS_CONNECT_BY_PATH()</strong>. Она принимает два параметра через запятую: название колонки и строку с символом-разделителем. Будем не оригинальны, напишем так: SYS_CONNECT_BY_PATH(title, ‘/’).<br/>
<br/>
Заодно ограничим вывод, выбрав только одну строку. Для этого, как всегда, нужно добавить условие WHERE. Даже в иерархическом запросе ограничивающее условие применяется ко всем строкам. Вставить его надо до иерархической конструкции, сразу после FROM. Для примера определим путь до “Сервер 1”, который у нас записан с id=9:<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">SELECT</font> SYS_CONNECT_BY_PATH(title, <font color="#A31515">'/'</font>) <font color="#0000ff">as</font> <font color="#0000ff">Path</font><br/>
<font color="#0000ff">FROM</font> test_table<br/>
<font color="#0000ff">WHERE</font> id=9<br/>
<font color="#0000ff">START</font> <font color="#0000ff">WITH</font> pid <font color="#0000ff">is</font> <font color="#0000ff">null</font><br/>
<font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> <font color="#0000ff">PRIOR</font> id = pid;</font></code></blockquote><br/>
<br/>
<pre>
PATH
----------------------------------------------------
/Россия/Воронеж/ООО &quot;Рога и копыта&quot;/Офис 2/Сервер 1
</pre><br/>
<br/>
Еще может быть полезен псевдостолбец <strong>CONNECT_BY_ISLEAF</strong>. Его можно использовать так же, как LEVEL. В этом псевдостолбце напротив каждой строки проставляется 0 или 1. Если есть потомки – проставится 0. Если потомков нет, такой узел в дереве называется “листом”, тогда и значение в поле CONNECT_BY_ISLEAF будет равно 1.<br/>
<br/>
Устали? Осталось немного, самое страшное уже позади. Раньше мы использовали оператор PRIOR, который ссылался к родительской записи. Помимо него есть другой унарный оператор <strong>CONNECT_BY_ROOT</strong>, который ссылается (ни за что не догадаетесь!) на корневую запись, т.е. на самую первую в выборке. <br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">SELECT</font> id, pid, title, <font color="#0000ff">level</font>, <br/>
&nbsp;CONNECT_BY_ISLEAF <font color="#0000ff">as</font> IsLeaf, <br/>
&nbsp;<font color="#0000ff">PRIOR</font> title <font color="#0000ff">as</font> Parent, <br/>
&nbsp;CONNECT_BY_ROOT title <font color="#0000ff">as</font> Root<br/>
<font color="#0000ff">FROM</font> test_table<br/>
<font color="#0000ff">START</font> <font color="#0000ff">WITH</font> pid <font color="#0000ff">is</font> <font color="#0000ff">null</font><br/>
<font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> <font color="#0000ff">PRIOR</font> id = pid<br/>
<font color="#0000ff">ORDER</font> SIBLINGS <font color="#0000ff">BY</font> title;</font></code></blockquote><br/>
<br/>
<pre>
ID PID TITLE                LEVEL LEAF PARENT               ROOT
-- --- -------------------- ----- ---- -------------------- ------
1      Россия               1     0    Россия
2  1   Воронеж              2     0    Россия               Россия
3  2   ООО &quot;Рога и копыта&quot;  3     0    Воронеж              Россия
6  3   Главный офис         4     1    ООО &quot;Рога и копыта&quot;  Россия
7  3   Офис 1               4     1    ООО &quot;Рога и копыта&quot;  Россия
8  3   Офис 2               4     0    ООО &quot;Рога и копыта&quot;  Россия
9  8   Сервер 1             5     1    Офис 2               Россия
5  1   Лиски                2     0    Россия               Россия
10 5   ЛискиПресс           3     1    Лиски                Россия
4  1   Москва               2     1    Россия               Россия
</pre><br/>
<br/>
Стоит отметить, что если в результате выполнения запроса обнаружится петля, Oracle выдаст ошибку. К счастью, ее можно обойти, хотя если в данных содержатся петли – это явно ошибка, в деревьях не бывает петель. На картинке с “бусами” запроса был нарисован оператор <strong>NOCYCLE</strong> после CONNECT BY – его мы и будем применять. Теперь запрос не будет вылетать. А чтобы определить “больной” участок, воспользуемся псевдостолбцом <strong>CONNECT_BY_ISCYCLE</strong> – в нем во всех хороших строках будет записано 0, а в тех, которые приводят к петлям, волшебным образом окажется 1.<br/>
<br/>
Чтобы проиллюстрировать это, придется немного подпортить данные. ЛискиПресс ссылается у нас на город Лиски; изменим запись Лиски, чтобы она ссылалась на ЛискиПресс (не забудьте про commit – я вечно забываю):<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">update</font> test_table <font color="#0000ff">set</font> pid=10 <font color="#0000ff">where</font> id=5;</font></code></blockquote><br/>
<br/>
Если мы запустим какой-нибудь из предыдущих запросов, увидим, что и Лиски, и ЛискиПресс выпали из выборки, будто их нет совсем. Бегая в цикле, Оракл просто перестал на них натыкаться, т.к. нет пути от записи Россия к городу Лиски. Изменим условия START WITH, чтобы начинать с города Лиски – появится ошибка. Умный Оракл видит что запись уже выбиралась ранее и отказывается бегать в бесконечном цикле. Исправляем ошибку:<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">SELECT</font> CONNECT_BY_ISCYCLE <font color="#0000ff">as</font> cycl, id, pid, title <br/>
<font color="#0000ff">FROM</font> test_table<br/>
<font color="#0000ff">START</font> <font color="#0000ff">WITH</font> id=5<br/>
<font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> NOCYCLE <font color="#0000ff">PRIOR</font> id = pid;</font></code></blockquote><br/>
<br/>
<pre>
CYCL         ID        PID TITLE
---- ---------- ---------- ----------
   0          5         10 Лиски
   1         10          5 ЛискиПресс
</pre><br/>
<br/>
<h4>Практические примеры</h4><br/>
<br/>
Иерархические запросы можно применять не только там, где есть явная иерархия.<br/>
<br/>
Например, рассмотрим задачу <i>получения списка пропущенных номеров из последовательности</i>. Это бывает нужно, когда в некоей таблице id генерируется автоматически путем увеличения на 1, но часть записей были удалены. Нужно получить список удаленных номеров. По хорошей традиции, это следует сделать одним селектом.<br/>
<br/>
Подготовим тестовые данные. Удалим из нашей таблицы пару записей:<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">DELETE</font> <font color="#0000ff">FROM</font> test_table <font color="#0000ff">WHERE</font> id <font color="#0000ff">IN</font> (3, 5);</font></code></blockquote><br/>
<br/>
С чего начнем? Во-первых, неплохо было бы получить список номеров подряд от 1 до максимального значения в нашей таблице, чтобы было с чем сравнивать. Выяснить максимальное значение id из таблицы, думаю, не составит никаких трудностей:<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">SELECT</font> <font color="#0000ff">max</font>(id) <font color="#0000ff">FROM</font> test_table</font></code></blockquote><br/>
<br/>
А вот чтобы сгенерировать последовательность от 1 до max как раз и понадобится рекурсивный запрос. Ведь как здорово просто взять и получить нужное количество строк! Достаточно будет их пронумеровать – и вот список готов.<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">SELECT</font> rownum <font color="#0000ff">as</font> rn <font color="#0000ff">FROM</font> dual<br/>
&nbsp;<font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> <font color="#0000ff">level</font> &lt;= (<font color="#0000ff">SELECT</font> <font color="#0000ff">max</font>(id) <font color="#0000ff">FROM</font> test_table);</font></code></blockquote><br/>
<br/>
Конструкция “SELECT … FROM dual” используется, когда надо вычислить значение функции, не производя при этом выборки данных. <strong>Dual</strong> – это системная таблица, состоящая из одного столбца и одной строки. Запрос из нее всегда возвращает одну строку со значением ‘X’. Благодаря такой умопомрачительной стабильности, эту таблицу удобно использовать в качестве источника строк.<br/>
<br/>
Обычно таблицу, которую нагло используют для получения нужного количества строк, не выбирая сами данные, называют <strong>pivot</strong>. В качестве такой таблицы может выступать любая большая таблица, в том числе системная. Но использование dual в Oracle является более разумным решением.<br/>
<br/>
Теперь, когда список номеров подряд уже есть, достаточно пройтись по нему и сравнить, есть ли такой номер в проверяемой таблице:<br/>
<br/>
<blockquote><code><font color="black"><font color="#0000ff">SELECT</font> sq.rn <br/>
<font color="#0000ff">FROM</font> (<font color="#0000ff">SELECT</font> rownum <font color="#0000ff">as</font> rn <font color="#0000ff">FROM</font> dual<br/>
&nbsp;<font color="#0000ff">CONNECT</font> <font color="#0000ff">BY</font> <font color="#0000ff">level</font> &lt;= (<font color="#0000ff">SELECT</font> <font color="#0000ff">max</font>(id) <font color="#0000ff">FROM</font> test_table)) sq<br/>
<font color="#0000ff">WHERE</font> sq.rn <font color="#0000ff">not</font> <font color="#0000ff">in</font> (<font color="#0000ff">SELECT</font> id <font color="#0000ff">FROM</font> test_table)<br/>
<font color="#0000ff">ORDER</font> <font color="#0000ff">BY</font> rn;</font></code></blockquote><br/>
<br/>
<pre>
  RN
----
   3
   5
</pre><br/>
<br/>
Всё. Ведро начищено до блеска, лошадь вооружена биноклем для остроты зрения. Да не коснется вас ROLLBACK. COMMIT!
    	<div class="clear"></div>
  	</div>
    
<ul class="tags">
	<li ><a href="http://habrahabr.ru/search/?q=%5Bsql%5D&target_type=posts" rel="tag">sql</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5BSQL-1999%5D&target_type=posts" rel="tag">SQL-1999</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5Bmysql%5D&target_type=posts" rel="tag">mysql</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5Boracle%5D&target_type=posts" rel="tag">oracle</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5B%D0%B8%D0%B5%D1%80%D0%B0%D1%80%D1%85%D0%B8%D1%8F%5D&target_type=posts" rel="tag">иерархия</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5B%D1%80%D0%B5%D0%BA%D1%83%D1%80%D1%81%D0%B8%D1%8F%5D&target_type=posts" rel="tag">рекурсия</a></li>
</ul>

    <div class="infopanel_wrapper">
	<div class="infopanel " id="infopanel_post_43955">

				<div class="voting   ">
	
						<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
	
					<div class="mark positive ">
							<span class="score" title="Всего 108: &uarr;103 и &darr;5">+98</span>
					</div>
					
						<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
		
				</div>
	
		<div class="pageviews" title="Просмотры публикации">105968</div>
			
		<div class="favorite">
				<a class="guest"	href="#" onclick="return false;" title="Только зарегистрированные пользователи могут добавлять публикации в избранное"></a>
		</div>
		<div class="favs_count" title="Количество пользователей, добавивших публикацию в избранное">304</div>
		
		
		
	
	
	
	
				<div class="author">
					<a title="Автор текста" href="http://habrahabr.ru/users/maovrn/" >maovrn</a>
					<span class="rating" title="рейтинг пользователя">0,0</span>
				</div>
		
	

			<div class="share">
				<div class="twitter">
					<a href="http://twitter.com/intent/tweet?text=%D0%98%D0%B5%D1%80%D0%B0%D1%80%D1%85%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5+%28%D1%80%D0%B5%D0%BA%D1%83%D1%80%D1%81%D0%B8%D0%B2%D0%BD%D1%8B%D0%B5%29+%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D1%8B+http://habr.ru/p/43955/+via+%40habrahabr+%23habr" title="Опубликовать ссылку в Twitter" target="_blank"></a>
				</div>
				<div class="vkontakte">
					<a href="https://vk.com/share.php?url=http://habrahabr.ru/post/43955/" title="Опубликовать ссылку во ВКонтакте" onclick="window.open(this.href, 'Опубликовать ссылку во Вконтакте', 'width=800,height=300'); return false"></a>
				</div>
				<div class="facebook">
					<a href="https://www.facebook.com/sharer/sharer.php?u=http://habrahabr.ru/post/43955/" title="Опубликовать ссылку в Facebook" onclick="window.open(this.href, 'Опубликовать ссылку в Facebook', 'width=640,height=436,toolbar=0,status=0'); return false"></a>
				</div>
				<div class="googleplus">
					<a href="https://plus.google.com/share?url=http://habrahabr.ru/post/43955/" title="Опубликовать ссылку в Google Plus" onclick="window.open(this.href, 'Опубликовать ссылку в Google Plus', 'width=800,height=300'); return false"></a>
				</div>
			</div>
	
	</div>
	<div class="clear"></div>
</div>





	</div>

    </div>

  	
  <div id="adriver_banner_132032996"></div>

  <script type="text/javascript">
      /** Для блоков гугла **/
      function requireAdsafe(file){
          var head = document.getElementsByTagName("head")[0];
          var script = document.createElement('script');
          script.src = file;
          script.type = 'text/javascript';
          head.appendChild(script);
      }

      function show_inner_banner_block(name, url){
          if( typeof(name) !== 'undefined'){
              //$.get('/html/'+name+'/1435178010/', function(html){
              $.get('http://special.habrahabr.ru/api/htmlblock/'+name+'/', function(html){
                  $('#adriver_banner_132032996').html(html);
                  $('.'+name+'_inner_banner').removeClass('hidden');
                  if( typeof(url) !== 'undefined'){
                      $('.'+name+'_inner_banner .block_url').attr('href', url);
                  }
              }, 'html')
          }
      }

        $(function(){
          var check_scroll_position = function() {
            var height = $(window).height();
            var scrollTop = $(window).scrollTop();
            var scrollBottom = $(window).scrollTop() + height;
            var blockTop = $('#adriver_banner_132032996').position().top;
            var show = scrollTop < blockTop && blockTop < scrollBottom;

            if( show ){
                $( window ).off('scroll', check_scroll_position);
                $( window ).trigger('show_bn3');
            }
          };


          $( window ).on('show_bn3', function(){
            var keyword = '';
            if (typeof crtg_content !== 'undefined' && crtg_content) { keyword = crtg_content; }
            var custom = { 4:ar_duo1 };
                custom[1] = 'sql';

            //if (true)
            //    show_inner_banner_block('raiffaizen2');
            //else
                new adriver("adriver_banner_132032996", {sid: 176776, bt: 52, bn: 3, custom: custom, keyword: keyword});
          });

          //$( window ).on('scroll', check_scroll_position);
          $( window ).trigger('show_bn3');
        });
    </script>





      <div class="block_after_post">
        


<div class="similar_posts">

    <h2 class="title">Похожие публикации</h2>
    <div class="posts_list">
        <div class="post_item">
            <span class="bull"></span>
            <a class="post_name"
               onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common'); }"
               href="/post/203742/">Выполнение SQL запросов в DB Oracle в Sublime Text 2</a>&nbsp;<span class="count">(10)</span>
        </div>
        <div class="post_item">
            <span class="bull"></span>
            <a class="post_name"
               onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common'); }"
               href="/post/200120/">String aggregation in the SQL Server world</a>&nbsp;<span class="count">(3)</span>
        </div>
        <div class="post_item">
            <span class="bull"></span>
            <a class="post_name"
               onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common'); }"
               href="/post/184318/">Размышления основателя MySQL о развитии проекта под крылом Oracle и о экономике открытых продуктов</a>&nbsp;<span class="count">(38)</span>
        </div>
        <div class="post_item">
            <span class="bull"></span>
            <a class="post_name"
               onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common'); }"
               href="/post/134179/">Репликация MySql -&gt; Oracle средствами Tungsten Replicator</a>&nbsp;<span class="count">(2)</span>
        </div>
        <div class="post_item">
            <span class="bull"></span>
            <a class="post_name"
               onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common'); }"
               href="/post/10977/">Насколько MS SQL Server безопаснее, чем Oracle</a>&nbsp;<span class="count">(10)</span>
        </div>
    </div>
</div>



      </div>

  		    <div class="comments_list " id="comments">

        <h2 class="title ">Комментарии (<span
            id="comments_count">154</span>)
            

        </h2>

        

            <div class="comment_item" id="comment_1095883" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095883">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095883" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 4: &uarr;3 и &darr;1">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 5 ноября 2008 в 10:59</time>

            <a href="#comment_1095883" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Весьма познавательно.<br/>
<br/>
Когда-то, когда появилась mysql5 с рудиментарными хранимыми процедурами, писал такую процедуру для неё, чтоб рекурсивно дерево извлекала. Но это всё равно очень криво работало :(
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095883">
        <div class="comment_item" id="comment_1096264" >

    <span class="parent_id" data-parent_id="1095883"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096264">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096264" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 16: &uarr;10 и &darr;6">+4</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 13:59</time>

            <a href="#comment_1096264" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096264" data-parent_id="1095883" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095883" data-id="1096264" data-parent_id="1095883" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Не обижайтесь maovrn… дальше поймете почему.<br/>
Для бухгалтерии скорости не надо, а для WEB это жизнь…<br/>
Поэтому. <br/>
Рекурсия это зло (я даже очень категоричен в этом). Теряем конроль над запросами — т.е. уже зло, плюс при хорошей нагрузке на сервер он ляжет и никакие добавления серверов не помогут, потому что нет гибкости… мы не сможим «по человечески» распараллелить сервера…<br/>
<br/>
Существуют «иерархические» алгоритмы для работы с БД (например Nested Sets, вполне неплохой, но тяжелый в понимании и не совсем иерархический), но я бы назвал это псевдоиерархия… <br/>
MySQL — это реляционная модель, но извините уже отставшая от требований на сегодня. Деревья и ветвления с большой глубиной все больше входят в мир web технологий…<br/>
И всё больше и больше я слышу вопрос, а можно ли «приручить» ...SQL-и для работы с иерархическими структурами, и есть ли панацея.<br/>
Отвечу — есть. И не рекурсией, так как при нагрузке она просто «убьет» сервер… <br/>
<br/>
Выход есть и уже работает. Я сделал иерархическую CMS (сейчас идет beta-тестирование, разрабатывал в общей сложности 2 года, это не клон теперешних, совершенно другая архитектура) без лишних join-ов и без рекурсии. <br/>
Я анализировал все алгоритмы более года, наконец взял всё лучшие из них и можно сказать сделал свой алгоритм. Единственный его недостаток, немного избыточность данных, но это не текст и избыточность минимальна. Зато по скорости (равномерности нагрузки) и гибкости реляционная модель курит в стороне. Причем все это реализовано даже на таком, не подготовленном к иерархии MySQL<br/>
Кстати из-за этого совсем изменилась архитектура CMS! Теперь она стала меньше, гибче и “универсальнее”. Теперь простыми правилами можно сделать как магазин, форум, социальную сеть… т е он явлеятся унифицированныи и универсальным…<br/>
То же и с нагрукой… Такую архитектуру легко распараллелить… зацепил? ;)<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096264">
        <div class="comment_item" id="comment_1096356" >

    <span class="parent_id" data-parent_id="1096264"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096356">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096356" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 14: &uarr;11 и &darr;3">+8</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/wdk/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/wdk/" class="username">wdk</a>
            <time> 5 ноября 2008 в 14:41</time>

            <a href="#comment_1096356" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096356" data-parent_id="1096264" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096264" data-id="1096356" data-parent_id="1096264" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            А я для теоремы Ферма чудо-доказательство придумал, идёт бета-тестирование.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096356">
        <div class="comment_item" id="comment_1096390" >

    <span class="parent_id" data-parent_id="1096356"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096390">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096390" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 16: &uarr;4 и &darr;12">–8</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:51</time>

            <a href="#comment_1096390" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096390" data-parent_id="1096356" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096356" data-id="1096390" data-parent_id="1096356" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad5">
            Извините но совсем не смешно.<br/>
Хотите поучавствовать. Есть требования. Одно из них соглашение о неразглашении.<br/>
А так как вы шутитите — вам скорее всего откажу.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096390">
        <div class="comment_item" id="comment_1096978" >

    <span class="parent_id" data-parent_id="1096390"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096978">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096978" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 6: &uarr;2 и &darr;4">–2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 18:50</time>

            <a href="#comment_1096978" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096978" data-parent_id="1096390" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096390" data-id="1096978" data-parent_id="1096390" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad2">
            мда, как обычно стадное явление, один минус поставил — за ним потянулись остальные…<br/>
коммент то «не о чем», тем более «сарказм тема». Внутренние разборки, а у нас как обычно… кого бьют? И не разобравшись вместе со всеми забить человека — детство.<br/>
Сделайте вначале что либо, потом саркастически и поговорим. Имхо ответил правильно, потому что если бы человек хотел увидить, он бы написал: а где можно увидить, пощупать…<br/>
<br/>
И вообще не понятна психология плюсующих… вы плюсуете чувство юмора или поддерживаете сарказм? Если первое, тогда не понятно минусование ответа… значит второе. 
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096978">
        <div class="comment_item" id="comment_1097202" >

    <span class="parent_id" data-parent_id="1096978"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097202">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097202" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 8: &uarr;5 и &darr;3">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/9ad/27f/909/9ad27f90990c582b2d33a2965a1121e3_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="username">Kaluchi</a>
            <time> 5 ноября 2008 в 20:42</time>

            <a href="#comment_1097202" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097202" data-parent_id="1096978" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096978" data-id="1097202" data-parent_id="1096978" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            а мне просто не нравится салатовый цвет =)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097202">
    </div>
</div>

        <div class="comment_item" id="comment_1097655" >

    <span class="parent_id" data-parent_id="1096978"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097655">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097655" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 3: &uarr;3 и &darr;0">+3</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/LimeOrange/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/302/36a/601/30236a6014cc2b0636722442479316ba_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/LimeOrange/" class="username">LimeOrange</a>
            <time> 6 ноября 2008 в 00:30</time>

            <a href="#comment_1097655" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097655" data-parent_id="1096978" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096978" data-id="1097655" data-parent_id="1096978" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Подтвердите сначала свои слова о «революционной CMS», предоставьте примеры, алгоритмы, доказательства, в конце концов, и тогда вам, может быть, поверят. Уж не обессудьте, но трындеть любой горазд. А громкие, но голословные и ничем не подкрепленные утверждения — это совсем не то, за что хотелось бы поставить плюс.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097655">
    </div>
</div>

        <div class="comment_item" id="comment_1102297" >

    <span class="parent_id" data-parent_id="1096978"></span>
    <div class="comment_body ">
        <div class="info  " rel="1102297">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1102297" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/KF_NEXUS/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/972/2d2/27c/9722d227c67d2ea5b7d62c84136f3e06_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/KF_NEXUS/" class="username">KF_NEXUS</a>
            <time> 7 ноября 2008 в 14:38</time>

            <a href="#comment_1102297" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1102297" data-parent_id="1096978" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096978" data-id="1102297" data-parent_id="1096978" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Скажите пожалуйста, а есть ли возможность поучаствовать в бетта тестировании? Я когда-то пытался сам что то такое как вы говорите реализовать, но не сил не опыта не хватило. Но уж очень интересно посмотреть на ваш прогресс в этой области.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1102297">
    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1525177" >

    <span class="parent_id" data-parent_id="1096356"></span>
    <div class="comment_body ">
        <div class="info  " rel="1525177">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1525177" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/TimTowdy/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/TimTowdy/" class="username">TimTowdy</a>
            <time>10 апреля 2009 в 02:46</time>

            <a href="#comment_1525177" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1525177" data-parent_id="1096356" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096356" data-id="1525177" data-parent_id="1096356" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Вы немного опоздали, её окончательно доказали 14 лет назад.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1525177">
    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096386" >

    <span class="parent_id" data-parent_id="1096264"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1096386">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096386" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 14:50</time>

            <a href="#comment_1096386" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096386" data-parent_id="1096264" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096264" data-id="1096386" data-parent_id="1096264" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Ценное замечание. Меня вы ничем не зацепили. Все надо применять с умом. Вполне логично что иерархические запросы более требовательны к ресурсам. К тому же они не предполагают работу с графами, которые встречаются не реже деревьев. <br/>
<br/>
Вообще построение дерева по всей таблице это скорее для примера. В реальной жизни всегда можно ограничить область выборки или создать агрегатную таблицу, куда попадут строки в уже правильном порядке вместе с полем level, тогда понадобится раз в день (или неделю, месяц) обновлять этот агрегат.<br/>
<br/>
Любопытно было бы взглянуть на вашу CMS. Похоже при ее разработке вы применили nested sets? У этого метода есть один минус: если понадобится передвинуть какую-нибудь ветку (скажем, «Сервер 1» из примера перевезти в Лиски), придется проходить по всем дочерним записям. Впрочем, это не имеет значения, если такое поведение не предполагается или бывает крайне редким.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096386">
        <div class="comment_item" id="comment_1096414" >

    <span class="parent_id" data-parent_id="1096386"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096414">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096414" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 3: &uarr;1 и &darr;2">–1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:54</time>

            <a href="#comment_1096414" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096414" data-parent_id="1096386" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096386" data-id="1096414" data-parent_id="1096386" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad1">
            NS там нет, я от него избавился очень давно. И вам советую.<br/>
Я немного намекну… я анализировал алгоритмы почти год…<br/>
Немного подсмотрел у IBM (коммерческие финансовые программы), но взял совсем немного сути.<br/>
Немного взял у NS — но только суть не архитектуру алгоритма.<br/>
<br/>
Алгоритм совершенствовался полее года.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096414">
        <div class="comment_item" id="comment_1096434" >

    <span class="parent_id" data-parent_id="1096414"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1096434">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096434" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 15:00</time>

            <a href="#comment_1096434" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096434" data-parent_id="1096414" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096414" data-id="1096434" data-parent_id="1096414" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Ну вы меня вообще заинтриговали. Обещаете рассказать когда исследования подойдут к концу?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096434">
        <div class="comment_item" id="comment_1096988" >

    <span class="parent_id" data-parent_id="1096434"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096988">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096988" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 4: &uarr;1 и &darr;3">–2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 18:55</time>

            <a href="#comment_1096988" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096988" data-parent_id="1096434" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096434" data-id="1096988" data-parent_id="1096434" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad2">
            Да вы увидите я напишу в «Я пиарюсь»…<br/>
Только судя по комментам участников (не относится к вам и другим трезвомыслящим людя), а надо ли?<br/>
Что-то после инвайтов, как то ряды разработчиков порядели… столько «детей» появилось…<br/>
<br/>
Детям: вам папа говорил, что минусовать без причины — признак дурачины? Всегда надо приводить аргументы.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096988">
        <div class="comment_item" id="comment_1099437" >

    <span class="parent_id" data-parent_id="1096988"></span>
    <div class="comment_body ">
        <div class="info  " rel="1099437">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1099437" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 6 ноября 2008 в 16:00</time>

            <a href="#comment_1099437" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1099437" data-parent_id="1096988" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096988" data-id="1099437" data-parent_id="1096988" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Аргументы: на протяжении уже двух дней подряд от вас от вас здесь есть только куча комментов типа: «вы все дети, потому, что меня минусуете, а я сам написал cms, она революционная и использует революционные алгоритмы, но я вам её не покажу, потому, что она ещё не готова и вообще вы ничего в ней не поймёте, потому вы все дети».<br/>
<br/>
Зато вы, ничего не предложив в замен, критикуете и отвергаете простое и удобное (в разработке), традиционнон решение — для работы с деревьями использовать рекурсию. Решение, кстати, которому лет больше, чем вам.<br/>
<br/>
Простите, (уважаемый), вы — пустозвон.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1099437">
        <div class="comment_item" id="comment_1099957" >

    <span class="parent_id" data-parent_id="1099437"></span>
    <div class="comment_body ">
        <div class="info  " rel="1099957">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1099957" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 6 ноября 2008 в 18:17</time>

            <a href="#comment_1099957" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1099957" data-parent_id="1099437" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1099437" data-id="1099957" data-parent_id="1099437" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            То что вы «додумываете» себе — это ваше личное горе… я такого не говорил и не имел ввиду. Я пытался переубедить это заблуждение…<br/>
Показал топик другим специалистам — долго смеялись. <br/>
<br/>
Далее…<br/>
Оо, вы уже перешли на личные оскорбления… :))<br/>
Так опускаться нельзя молодой человек…<br/>
<br/>
Мда, мало вас папа в детстве ремнем бил наверно… ошибки в воспитании видимо, жаль в таком возрасте вы их уже не исправите.<br/>
<br/>
Далее отвечаю…<br/>
<br/>
Да плюньте вы на мой алгоритм, если он вам не нравится и вы его не видели (а уже обсуждаете). <br/>
Рекурсия в высокоскоростный БД, это это традиционное заблуждение. Да(!) существуют, другие алгоритмы, в конце концов… да тот же Nested Sets в 1000 раз лучше… или «материализованный путь», а есть и обьединенные эти два алгоритма…<br/>
Они тоже — универсальные. И вся выборка выполняется одним запросом! Уперлись вы в «свою» рекурсию…<br/>
<br/>
Нравиться — ради бога… пользуйтесь, не хотите слушать других… ходите по кругу…<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1099957">
    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_8356627" >

    <span class="parent_id" data-parent_id="1096988"></span>
    <div class="comment_body ">
        <div class="info  " rel="8356627">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8356627" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/SunDrop/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/fa8/d16/22b/fa8d1622b3515cddf3aa6e70ad5c5c1e_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/SunDrop/" class="username">SunDrop</a>
            <time> 1 апреля 2015 в 21:55</time>

            <a href="#comment_8356627" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="8356627" data-parent_id="1096988" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096988" data-id="8356627" data-parent_id="1096988" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            А статейку уже можно посмотреть где-то?<br/>
Интересно бы было сейчас почитать
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8356627">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096427" >

    <span class="parent_id" data-parent_id="1096386"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096427">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096427" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 3: &uarr;0 и &darr;3">–3</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:57</time>

            <a href="#comment_1096427" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096427" data-parent_id="1096386" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096386" data-id="1096427" data-parent_id="1096386" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad3">
            Вы часто перемещаете ветки? <br/>
Для бухгалтерии это не часто, а для web-а так и вообще раз в полгода максимум.<br/>
Переименование ветки — гараздо чаще, но если грамотно построена архитектура то это тоже очень простой вопрос.<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096427">
    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096416" >

    <span class="parent_id" data-parent_id="1096264"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1096416">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096416" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 14:55</time>

            <a href="#comment_1096416" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096416" data-parent_id="1096264" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096264" data-id="1096416" data-parent_id="1096264" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Кстати, помимо реляционных СУБД, рассмотренных мною, бывают еще и <a href="http://ru.wikipedia.org/wiki/Иерархическая_СУБД">иерархические</a>, специально заточенные под хранение иерархических данных. Мне никогда не приходилось с ними сталкиваться (если не считать реестр MS Windows), но мне кажется, раз уж предъявляются жесткие требования к производительности именно на иерархических данных, к ним стоит присмотреться.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096416">
        <div class="comment_item" id="comment_1096423" >

    <span class="parent_id" data-parent_id="1096416"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096423">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096423" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 5 ноября 2008 в 14:56</time>

            <a href="#comment_1096423" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096423" data-parent_id="1096416" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096416" data-id="1096423" data-parent_id="1096416" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Да ну? А как же файловые системы, LDAP (в частности, Microsoft AD), DNS? :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096423">
        <div class="comment_item" id="comment_1099118" >

    <span class="parent_id" data-parent_id="1096423"></span>
    <div class="comment_body ">
        <div class="info  " rel="1099118">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1099118" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 6 ноября 2008 в 14:43</time>

            <a href="#comment_1099118" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1099118" data-parent_id="1096423" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096423" data-id="1099118" data-parent_id="1096423" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Не понятно… почему Вам минус поставили… а, я понял, вы поддержали меня :)<br/>
Так как я высказываюсь довольно резко, у меня много «анти-почитателей»…<br/>
Но я всегда высказываюсь резко в только в том случае, если это по пройденному опыту, и я знаю о чем говорю.<br/>
<br/>
А поставили «просто так», а ведь Вы правы ;)<br/>
<br/>
Кстати для разработки иерархической БД очень много сути можно взять из файловых систем… (я взял, и доступ и расширения и еще много чего)<br/>
Просто те кто минусовали, врядли вообще что-то сделали… из разряда ламеров.<br/>
Сейчас ламеры опять заминусуют :) Ну, ну… мне от этого не хуже :))<br/>
<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1099118">
        <div class="comment_item" id="comment_1099245" >

    <span class="parent_id" data-parent_id="1099118"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1099245">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1099245" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 6 ноября 2008 в 15:12</time>

            <a href="#comment_1099245" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1099245" data-parent_id="1099118" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1099118" data-id="1099245" data-parent_id="1099118" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Думаю уже не заминусуют: основной поток читателей уже прошел, напоминание что появился новый комментарий видят только я и merlin_rterm.<br/>
<br/>
Я только имел ввиду именно иерархическую БД, а не файловую систему, реестр или DNS. То что они по своей сути похожи — это понятно. <br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1099245">
        <div class="comment_item" id="comment_1099458" >

    <span class="parent_id" data-parent_id="1099245"></span>
    <div class="comment_body ">
        <div class="info  " rel="1099458">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1099458" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 6 ноября 2008 в 16:04</time>

            <a href="#comment_1099458" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1099458" data-parent_id="1099245" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1099245" data-id="1099458" data-parent_id="1099245" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я всегда воспринимал ФС (достаточно продвинутую, не как FAT) именно как иерархическую БД. Под определние ИБД, она, по крайней мере, подпадает.<br/>
<br/>
DNS — не подпадает, потому, что там нет возможности «перечисления» всех записей.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1099458">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096429" >

    <span class="parent_id" data-parent_id="1096416"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096429">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096429" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 6: &uarr;3 и &darr;3">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:59</time>

            <a href="#comment_1096429" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096429" data-parent_id="1096416" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096416" data-id="1096429" data-parent_id="1096416" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Сейчас вас удивлю… вы сталкиваетесь каждый день! И почти каждую секунду…<br/>
Вот и ответ: FAT и другие файловые системы :)))
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096429">
    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1097301" >

    <span class="parent_id" data-parent_id="1096264"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097301">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097301" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 1: &uarr;0 и &darr;1">–1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Anthony/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/c5c/11f/af2/c5c11faf2980c79d1f62e8dd012e22ed_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/Anthony/" class="username">Anthony</a>
            <time> 5 ноября 2008 в 21:41</time>

            <a href="#comment_1097301" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097301" data-parent_id="1096264" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096264" data-id="1097301" data-parent_id="1096264" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad1">
            На каком основании вы делаете вывод относительно скорости рекурсивных запросов?<br/>
Вы сами сравнивали производительность или видели какое-то исследование?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097301">
        <div class="comment_item" id="comment_1098226" >

    <span class="parent_id" data-parent_id="1097301"></span>
    <div class="comment_body ">
        <div class="info  " rel="1098226">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098226" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 6 ноября 2008 в 10:39</time>

            <a href="#comment_1098226" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098226" data-parent_id="1097301" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097301" data-id="1098226" data-parent_id="1097301" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            На основе 18-летнего опыта в этой области. <br/>
Если вам не важна скорость и вам плевать на контроль запросов… пользуйтесь. Я вам не даю?<br/>
Это самый «легкий» способ, для начинающих.<br/>
Если вы хотите высокопроизводительное web приложение с высокой нагрузкой… я советую забыть про рекурсию.<br/>
О рекурсии уже давно изжевано и написано много статей.<br/>
А вам тяжело самому найти исследования? Их очень много. И все специалисты в один голос пишут, что это зло.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098226">
    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_6181449" >

    <span class="parent_id" data-parent_id="1096264"></span>
    <div class="comment_body ">
        <div class="info  " rel="6181449">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_6181449" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/hom/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/a9e/c16/da9/a9ec16da94ffb85a93e5e4f5980d8614_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/hom/" class="username">hom</a>
            <time>26 апреля 2013 в 13:02</time>

            <a href="#comment_6181449" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="6181449" data-parent_id="1096264" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096264" data-id="6181449" data-parent_id="1096264" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Повелся я на ваш троллинг по поводу добра и зла. Зря вы так категоричны про рекурсию, контроль можно потерять и без рекурсии, банально написав неоптимальный запрос. В дискретной математике рекурсия так же присутствует во многих алгоритмах. Скорее велосипеды — это зло, хотя если хорошенько поискать можно и добрые велосипеды найти.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_6181449">
    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1095884" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095884">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095884" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 4: &uarr;4 и &darr;0">+4</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/XaocCPS/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/de0/25b/c77/de025bc773a7f0a35c1837fcb3b0e3a1_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/XaocCPS/" class="username">XaocCPS</a>
            <time> 5 ноября 2008 в 10:59</time>

            <a href="#comment_1095884" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Автор, отличная статья, послал вам личное письмо по поводу включения статьи в следующий habradigest.<br/>
<br/>
По поводу создания иерархий хотел бы еще и еще раз разрекламировать hierarchyId MS SQL Server 2008:<br/>
<a href="http://habrahabr.ru/blogs/sql/27774/">habrahabr.ru/blogs/sql/27774/</a><br/>
если вы дополните статью небольшим параграфом про hierarchyId, я буду просто счастлив :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095884">
        <div class="comment_item" id="comment_1096016" >

    <span class="parent_id" data-parent_id="1095884"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1096016">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096016" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 12:04</time>

            <a href="#comment_1096016" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096016" data-parent_id="1095884" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095884" data-id="1096016" data-parent_id="1095884" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Рад осчастливить хабраюзера. Добавил ссылку.<br/>
Кстати, сам был не в курсе, прочитал с удовольствием.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096016">
    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1095886" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095886">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095886" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 4: &uarr;3 и &darr;1">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/nutt/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/0fc/a23/ad0/0fca23ad018802fd53f53ac03dbbcc65_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/nutt/" class="username">nutt</a>
            <time> 5 ноября 2008 в 11:02</time>

            <a href="#comment_1095886" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Очень познавательно. Попробую применить. =)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095886">
        <div class="comment_item" id="comment_1096331" >

    <span class="parent_id" data-parent_id="1095886"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096331">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096331" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 10: &uarr;1 и &darr;9">–8</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:31</time>

            <a href="#comment_1096331" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096331" data-parent_id="1095886" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095886" data-id="1096331" data-parent_id="1095886" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad5">
            Если честно, лучше не надо… <br/>
Я описал <a href="http://habrahabr.ru/blogs/sql/43955/#comment_1096264">выше</a> почему.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096331">
        <div class="comment_item" id="comment_1096432" >

    <span class="parent_id" data-parent_id="1096331"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096432">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096432" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 15:00</time>

            <a href="#comment_1096432" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096432" data-parent_id="1096331" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096331" data-id="1096432" data-parent_id="1096331" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Эй «минус», а аргументы? как обычно троллим…
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096432">
    </div>
</div>

        <div class="comment_item" id="comment_1096516" >

    <span class="parent_id" data-parent_id="1096331"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096516">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096516" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/anatoly_rr/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/723/934/98e/72393498e37ec91b139bd8cdc118efb5_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/anatoly_rr/" class="username">anatoly_rr</a>
            <time> 5 ноября 2008 в 15:24</time>

            <a href="#comment_1096516" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096516" data-parent_id="1096331" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096331" data-id="1096516" data-parent_id="1096331" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            опишите ещё, <i>что конкретно</i> применять вместо этого, тогда можно будет отказаться от этого подхода<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096516">
        <div class="comment_item" id="comment_1096732" >

    <span class="parent_id" data-parent_id="1096516"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096732">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096732" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 3: &uarr;1 и &darr;2">–1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 16:51</time>

            <a href="#comment_1096732" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096732" data-parent_id="1096516" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096516" data-id="1096732" data-parent_id="1096516" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad1">
            К сожалению пока свой алгоритм выложить в паблик не могу. (читайте мои комменты «почему»)<br/>
Но могу сказать одно, даже NS и материализованный путь на порядок лучше алгоритма описанного автором.<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096732">
        <div class="comment_item" id="comment_1096849" >

    <span class="parent_id" data-parent_id="1096732"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1096849">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096849" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 4: &uarr;3 и &darr;1">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 17:51</time>

            <a href="#comment_1096849" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096849" data-parent_id="1096732" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096732" data-id="1096849" data-parent_id="1096732" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я уверен, что стандартные решения, предложенные производителями СУБД и описанные в данном топике, подойдут для большого круга задач. А стандартизованность и простота решения окупит себя по сравнению с «самопальными» алгоритмами, пусть даже и несколько более производительными. Конечно, если дерево станет гигантским и производительность упрется именно в иерархические запросы, возможно, придется что-нибудь переписать. Но я бы тогда начал с переосмысливания хранимых данных и попытался бы уложить их в реляционную модель. Или хотя бы ограничил область выборки. Или использовал бы агрегаты. Следует смотреть по обстоятельствам. Использование нестандартных методов, с моей точки зрения, еще большее зло чем падение производительности при рекурсии.<br/>
<br/>
Если все будут говорить «все придумали до нас», не будет никакого прогресса. Я искренне желаю вам успехов с вашим алгоритмом. Но в настоящее время ваш алгоритм использовать нельзя, у NS есть свои минусы. Поэтому я не был бы столь категоричен.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096849">
        <div class="comment_item" id="comment_1096895" >

    <span class="parent_id" data-parent_id="1096849"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096895">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096895" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 18:18</time>

            <a href="#comment_1096895" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096895" data-parent_id="1096849" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096849" data-id="1096895" data-parent_id="1096849" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Вы шутите? <br/>
Конечно, Вам не предложат коммерческих алгоритмов… это алгоритм для… не хочу матом ругаться, тех у кого денег нет чтобы купить Oracle-вские программы и для того чтобы те кто пользуются этими «алгоритмами», «тормозили» безбожно и бежали в магазин и покупали Oracle-вские программы… <br/>
А название «самопальные» можно под 99% и-нета причесать… заканчиваем холивар. Рекурсия в БД — ЗЛО и не надо других вводить в заблуждение.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096895">
        <div class="comment_item" id="comment_1097279" >

    <span class="parent_id" data-parent_id="1096895"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097279">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097279" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/9ad/27f/909/9ad27f90990c582b2d33a2965a1121e3_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="username">Kaluchi</a>
            <time> 5 ноября 2008 в 21:27</time>

            <a href="#comment_1097279" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097279" data-parent_id="1096895" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096895" data-id="1097279" data-parent_id="1096895" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            <blockquote>Рекурсия в БД — ЗЛО и не надо других вводить в заблуждение.<br/>
</blockquote><br/>
<br/>
Полностью согласен. Проблемы с пониманием этого возникают у программистов, мыслящих только в процедурном ключе. Так же те не понимают как в реляционном мире SQL можно жить без for-ов, while-ов, switch-ей и if-ов… =))
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097279">
        <div class="comment_item" id="comment_1097399" >

    <span class="parent_id" data-parent_id="1097279"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1097399">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097399" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 22:29</time>

            <a href="#comment_1097399" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097399" data-parent_id="1097279" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097279" data-id="1097399" data-parent_id="1097279" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Кстати, у Оракла в конструкции SELECT есть функции, работающие аналогично switch-ам (DECODE)и if-ам (IIF). Иногда их приходится применять. И не сказал бы что это плохо. Если есть инструмент, почему бы им не пользоваться. Конечно, во всем должна быть мера. Но и подходить к СУБД с позиции тупой хранилки данных, пользуясь только синтаксисом самого первого стандарта SQL-89, согласитесь, тоже не правильно.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097399">
        <div class="comment_item" id="comment_1097410" >

    <span class="parent_id" data-parent_id="1097399"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1097410">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097410" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 22:34</time>

            <a href="#comment_1097410" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097410" data-parent_id="1097399" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097399" data-id="1097410" data-parent_id="1097399" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Пардон, первым был SQL-82. Но суть предыдущего от этого не меняется.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097410">
    </div>
</div>

        <div class="comment_item" id="comment_1097489" >

    <span class="parent_id" data-parent_id="1097399"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097489">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097489" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/9ad/27f/909/9ad27f90990c582b2d33a2965a1121e3_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="username">Kaluchi</a>
            <time> 5 ноября 2008 в 23:21</time>

            <a href="#comment_1097489" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097489" data-parent_id="1097399" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097399" data-id="1097489" data-parent_id="1097399" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Соглашусь =) Но…<br/>
<br/>
<blockquote>Но и подходить к СУБД с позиции тупой хранилки данных, пользуясь только синтаксисом самого первого стандарта SQL-89, согласитесь, тоже не правильно.<br/>
</blockquote><br/>
<br/>
Как раз-таки из-за того, что большинство программистов подходят к СУБД с позиции «тупой хранилки данных» — и приходится прибегать к нестандартным запросам. И вот здесь — инстументы оракла сильно вас выручают =)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097489">
        <div class="comment_item" id="comment_1099479" >

    <span class="parent_id" data-parent_id="1097489"></span>
    <div class="comment_body ">
        <div class="info  " rel="1099479">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1099479" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 6 ноября 2008 в 16:06</time>

            <a href="#comment_1099479" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1099479" data-parent_id="1097489" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097489" data-id="1099479" data-parent_id="1097489" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            СУБД — это именно хранилка данных, с интерфейсом для их занесения, перечисления и извлечения.<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1099479">
        <div class="comment_item" id="comment_1100207" >

    <span class="parent_id" data-parent_id="1099479"></span>
    <div class="comment_body ">
        <div class="info  " rel="1100207">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1100207" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/9ad/27f/909/9ad27f90990c582b2d33a2965a1121e3_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="username">Kaluchi</a>
            <time> 6 ноября 2008 в 19:35</time>

            <a href="#comment_1100207" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1100207" data-parent_id="1099479" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1099479" data-id="1100207" data-parent_id="1099479" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Вы не поняли меня. Я говорил про то, что <u>не стоит</u> &quot;<i>подходить к СУБД с позиции <b><u>тупой</u></b> хранилки данных</i>(черному ящику)&quot;, т. к. этот подход в большинстве случаев приводит к печальным последствиям(за исключением проектов уровня hello world). <br/>
<br/>
Даже самая «навороченная» СУБД не спасёт вас, если ваши ваши таблицы используются в качестве «свалки данных». Защиты от дурака в СУБД — нет =) Учитесь ею правильно пользоваться.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1100207">
        <div class="comment_item" id="comment_1100281" >

    <span class="parent_id" data-parent_id="1100207"></span>
    <div class="comment_body ">
        <div class="info  " rel="1100281">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1100281" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 6 ноября 2008 в 20:09</time>

            <a href="#comment_1100281" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1100281" data-parent_id="1100207" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1100207" data-id="1100281" data-parent_id="1100207" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Ну, СУБД разные бывают. Те, интерфейс которых построен на языке SQL, как раз и <b>надлежит</b> рассматривать как чёрный ящик. Собственно, SQL для того и придуман, чтобы при запросе указывать только свойства нужных данных, не задумываясь о том, как именно эти данные будут найдены и аггрегированы.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1100281">
        <div class="comment_item" id="comment_1100320" >

    <span class="parent_id" data-parent_id="1100281"></span>
    <div class="comment_body ">
        <div class="info  " rel="1100320">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1100320" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/9ad/27f/909/9ad27f90990c582b2d33a2965a1121e3_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/Kaluchi/" class="username">Kaluchi</a>
            <time> 6 ноября 2008 в 20:25</time>

            <a href="#comment_1100320" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1100320" data-parent_id="1100281" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1100281" data-id="1100320" data-parent_id="1100281" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            <blockquote>Ну, СУБД разные бывают. Те, интерфейс которых построен на языке SQL, как раз и надлежит рассматривать как чёрный ящик. <br/>
</blockquote><br/>
Конечно, в идеале оно так и должно быть. Но в реальном мире вашим «черным ящиком» нужно ещё как-то управлять(устанавливать, настраивать, бэкапить, оптимизировать, масшабировать и т.д. — куча ньюансов) И вот здесь ваши теоретические познания SQL вам уже никак не помогут. 
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1100320">
        <div class="comment_item" id="comment_1100377" >

    <span class="parent_id" data-parent_id="1100320"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1100377">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1100377" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 6 ноября 2008 в 20:53</time>

            <a href="#comment_1100377" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1100377" data-parent_id="1100320" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1100320" data-id="1100377" data-parent_id="1100320" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Полностью поддерживаю. Изначально SQL предполагался как язык конечного пользователя. Но сейчас он настолько сложен, что нужен программист. Помимо этого, все СУБД имеют в своем арсенале какие-то свои уникальные функции, методы работы и т.д.<br/>
<br/>
Например, как ограничить выборку первыми N строками? Такой запрос, особенно в web, выполняется очень часто. А решается он у всех по разному: в mySQL это LIMIT(N), в PostgesSQL это LIMIT N, в Oracle rownum&lt;=N
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1100377">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1097315" >

    <span class="parent_id" data-parent_id="1096732"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097315">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097315" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 3: &uarr;0 и &darr;3">–3</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Anthony/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/c5c/11f/af2/c5c11faf2980c79d1f62e8dd012e22ed_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/Anthony/" class="username">Anthony</a>
            <time> 5 ноября 2008 в 21:46</time>

            <a href="#comment_1097315" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097315" data-parent_id="1096732" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096732" data-id="1097315" data-parent_id="1096732" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad3">
            А я вечный двигатель изобрел только показать не могу пока — тайна:)<br/>
Вам не кажется, что это глуповато?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097315">
        <div class="comment_item" id="comment_1098248" >

    <span class="parent_id" data-parent_id="1097315"></span>
    <div class="comment_body ">
        <div class="info  " rel="1098248">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098248" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 3: &uarr;0 и &darr;3">–3</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 6 ноября 2008 в 10:44</time>

            <a href="#comment_1098248" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098248" data-parent_id="1097315" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097315" data-id="1098248" data-parent_id="1097315" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad3">
            Не сравнивайте х… с пальцем. <br/>
<br/>
CMS и вечный двигатель. Ваш сарказм не уместен. <br/>
Я почти некогда не минусую. Но извините… Ваш сарказм — глупость и детство. (в стиле — «сам дурак»)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098248">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1095914" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095914">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095914" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 3: &uarr;3 и &darr;0">+3</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/alexxz/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/alexxz/" class="username">alexxz</a>
            <time> 5 ноября 2008 в 11:23</time>

            <a href="#comment_1095914" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Можно ещё упомянуть <a href="http://www.getinfo.ru/article610.html">nested sets</a>. Да, вникать в них надо довольно долго, но в итоге результаты на, мой взгляд, себя оправдывают. По крайней мере начинаешь видеть задачу хранения иерархий в несколько другом свете. Способ подходит для всех реляционных СУБД. Показывает своё преимущество при больших уровнях вложенности.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095914">
        <div class="comment_item" id="comment_1095952" >

    <span class="parent_id" data-parent_id="1095914"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095952">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095952" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/rakot/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/766/771/69c/76677169c0fd55ccc698e622ddba1703_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/rakot/" class="username">rakot</a>
            <time> 5 ноября 2008 в 11:43</time>

            <a href="#comment_1095952" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1095952" data-parent_id="1095914" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095914" data-id="1095952" data-parent_id="1095914" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            «в создании левой и правой границы для каждого узла» — если я не ошибаюсь это и есть nested sets. не смотрел что в ссылке дал автор.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095952">
    </div>
</div>

        <div class="comment_item" id="comment_1095974" >

    <span class="parent_id" data-parent_id="1095914"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1095974">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095974" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 11:51</time>

            <a href="#comment_1095974" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1095974" data-parent_id="1095914" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095914" data-id="1095974" data-parent_id="1095914" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            В методе Селко как раз и используется nested sets. Но спасибо вам за ссылку, у вас этот метод описан более наглядно.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095974">
    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1095933" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095933">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095933" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/RomanL/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/RomanL/" class="username">RomanL</a>
            <time> 5 ноября 2008 в 11:37</time>

            <a href="#comment_1095933" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Для небольших деревьев я использую несколько иной подход — написал класс, который формирует дерево в памяти, загружая поля ID, PARENT_ID, TITLE обычным селектом. Для большинства задач этого вполне хватает и гибкость такого подхода оправдывает некоторый расточительный расход памяти.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095933">
    </div>
</div>

            <div class="comment_item" id="comment_1095940" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095940">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095940" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/rakot/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/766/771/69c/76677169c0fd55ccc698e622ddba1703_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/rakot/" class="username">rakot</a>
            <time> 5 ноября 2008 в 11:39</time>

            <a href="#comment_1095940" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            В MySQL вышел из ситуации тем, что записываю полный путь элемента до корневого элемента (parents_ids=«1,3,5») т.е. уровень можно посчитать по запятым, а ветки выбираю при помощи FIND_IN_SET. Ничего нового в этом нет, но пока удачных реализаций этого метода не находил, хотябы потому что везде где видел подобную реализацию используется LIKE, а мой пока еще не оформлен должным образом чтобы вывести на паблик.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095940">
        <div class="comment_item" id="comment_1095984" >

    <span class="parent_id" data-parent_id="1095940"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095984">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095984" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/ganzer/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/5ca/40b/b47/5ca40bb47865961b18e6fd6bb7536d08_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/ganzer/" class="username">ganzer</a>
            <time> 5 ноября 2008 в 11:55</time>

            <a href="#comment_1095984" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1095984" data-parent_id="1095940" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095940" data-id="1095984" data-parent_id="1095940" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Надо попробовать, пока тоже использую LIKE.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095984">
        <div class="comment_item" id="comment_1096337" >

    <span class="parent_id" data-parent_id="1095984"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096337">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096337" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 1: &uarr;0 и &darr;1">–1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:34</time>

            <a href="#comment_1096337" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096337" data-parent_id="1095984" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095984" data-id="1096337" data-parent_id="1095984" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad1">
            Если вы используете LIKE как %search% — то уж лучше NS ;)<br/>
<br/>
LIKE можно использовать но как строгое &quot;=&quot;<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096337">
        <div class="comment_item" id="comment_1097297" >

    <span class="parent_id" data-parent_id="1096337"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097297">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097297" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Anthony/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/c5c/11f/af2/c5c11faf2980c79d1f62e8dd012e22ed_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/Anthony/" class="username">Anthony</a>
            <time> 5 ноября 2008 в 21:38</time>

            <a href="#comment_1097297" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097297" data-parent_id="1096337" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096337" data-id="1097297" data-parent_id="1096337" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Если его использовать как &quot;=&quot;, то почему бы не написать &quot;=&quot;, а не LIKE?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097297">
    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096150" >

    <span class="parent_id" data-parent_id="1095940"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096150">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096150" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/TedBeer/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/160/a3e/c9e/160a3ec9efa56b9a7ea7c11732814673_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/TedBeer/" class="username">TedBeer</a>
            <time> 5 ноября 2008 в 13:04</time>

            <a href="#comment_1096150" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096150" data-parent_id="1095940" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095940" data-id="1096150" data-parent_id="1095940" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Есть проблема с хранением полного пути вместо его генерации на лету — когда надо передвинуть узел на новое место иерархии, то придется пересчитывать и менять все потомки. А при хранении только ссылки на родителя и генерации пути на лету надо изменить только одну запись, что конечно более надежно и более эффективно. Особенно если деревья большие.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096150">
        <div class="comment_item" id="comment_1096161" >

    <span class="parent_id" data-parent_id="1096150"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096161">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096161" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/rakot/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/766/771/69c/76677169c0fd55ccc698e622ddba1703_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/rakot/" class="username">rakot</a>
            <time> 5 ноября 2008 в 13:10</time>

            <a href="#comment_1096161" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096161" data-parent_id="1096150" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096150" data-id="1096161" data-parent_id="1096150" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Полностью с Вами согласен, перенос веток действительно становиться проблематичной задачей в таком подходе, пока не было задач по переносу веток, а поразмышлять на досуге, времени особо нет.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096161">
    </div>
</div>

        <div class="comment_item" id="comment_1096349" >

    <span class="parent_id" data-parent_id="1096150"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096349">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096349" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:39</time>

            <a href="#comment_1096349" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096349" data-parent_id="1096150" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096150" data-id="1096349" data-parent_id="1096150" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Это легко делается если у вас есть id узла который меняете и есть новый алгоритм… <a href="http://habrahabr.ru/blogs/sql/43955/#comment_1096264">:)</a><br/>
Да кстати, а вы часто перемещаете узлы? ;) Я думая, что нет… :)<br/>
Поэтому выполнить одну ресурсоемкую задачу раз в полгода, это не рекурсия которая такую нагрузку дает ежесекундно…<br/>
<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096349">
    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1095941" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095941">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095941" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/ElenaHell/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/a8a/fb8/e8c/a8afb8e8c5a3363c21d56b6e030926dd_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/ElenaHell/" class="username">ElenaHell</a>
            <time> 5 ноября 2008 в 11:39</time>

            <a href="#comment_1095941" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я думаю, не лишним будет упомянуть, что оператор «with» так же есть в Oracle. И по большому счету никто не запрещает создать иерархический запрос на его основе. Хотя это из серии «а оно надо?». Все же «with» в Oracle удобно использовать для других целей, а не только построения иерархий.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095941">
        <div class="comment_item" id="comment_1096010" >

    <span class="parent_id" data-parent_id="1095941"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1096010">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096010" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 12:02</time>

            <a href="#comment_1096010" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096010" data-parent_id="1095941" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095941" data-id="1096010" data-parent_id="1095941" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Оператор with в Oracle используется. В частности в конструкции START WITH. Можно с его помощью создать представление. Но вот обратиться к нему в процессе создания этого представления, как в синтаксисе SQL-1999 у меня не получилось (может руки не от туда ростут :-( ). Не могли бы вы написать правильный запрос? Кстати, я сейчас проверял на Oracle 10.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096010">
        <div class="comment_item" id="comment_1096441" >

    <span class="parent_id" data-parent_id="1096010"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096441">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096441" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/ElenaHell/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/a8a/fb8/e8c/a8afb8e8c5a3363c21d56b6e030926dd_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/ElenaHell/" class="username">ElenaHell</a>
            <time> 5 ноября 2008 в 15:02</time>

            <a href="#comment_1096441" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096441" data-parent_id="1096010" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096010" data-id="1096441" data-parent_id="1096010" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я говорила про конструкцию типа:<br/>
with <br/>
rec1 as ( select * from dual),<br/>
rec2 as ( select * from dual) <br/>
select * <br/>
from rec1, rec2; <br/>
<br/>
Наверное, не совсем так выразилась. Я имела в виду, что в оракле есть похожая конструкция «with» использующихся для немного других целей.<br/>
И что она очень похожа на: <br/>
WITH [recursive] имя_алиаса_запроса [ (список столбцов) ]<br/>
AS (запрос) <br/>
основной запрос<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096441">
    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1095977" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095977">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095977" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 10: &uarr;9 и &darr;1">+8</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/ganzer/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/5ca/40b/b47/5ca40bb47865961b18e6fd6bb7536d08_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/ganzer/" class="username">ganzer</a>
            <time> 5 ноября 2008 в 11:53</time>

            <a href="#comment_1095977" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Что-бы тут написать такое, чтобы сказать что прочитал с удовольствием, и не схлопотать минус?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095977">
    </div>
</div>

            <div class="comment_item" id="comment_1095996" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1095996">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1095996" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 12: &uarr;6 и &darr;6">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/BisnoyZakat/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/BisnoyZakat/" class="username">BisnoyZakat</a>
            <time> 5 ноября 2008 в 11:58</time>

            <a href="#comment_1095996" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            «Чтобы понять рекурсию, сначала надо понять рекурсию». — завис.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1095996">
        <div class="comment_item" id="comment_1096354" >

    <span class="parent_id" data-parent_id="1095996"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096354">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096354" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:40</time>

            <a href="#comment_1096354" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096354" data-parent_id="1095996" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1095996" data-id="1096354" data-parent_id="1095996" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            А почему человеку влепили минус?<br/>
Вы не вдумались, а он почти прав… когда разработчик теряет конроль над запросами — то жди «даун»<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096354">
        <div class="comment_item" id="comment_1096394" >

    <span class="parent_id" data-parent_id="1096354"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096394">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096394" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 1: &uarr;0 и &darr;1">–1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/BisnoyZakat/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/BisnoyZakat/" class="username">BisnoyZakat</a>
            <time> 5 ноября 2008 в 14:52</time>

            <a href="#comment_1096394" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096394" data-parent_id="1096354" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096354" data-id="1096394" data-parent_id="1096354" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad1">
            Мне собственно без разницы на этот минус, я просто удивлён тому, что я единственный кто находит в этой фразе тавтологию… вероятно минусующие часто говорят что-то вроде:<br/>
Чтобы налить молоко, нужно налить молоко! или нет лучше даже так — «Чтобы правильно минусовать, нужно правильно минусовать!»
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096394">
        <div class="comment_item" id="comment_1096418" >

    <span class="parent_id" data-parent_id="1096394"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096418">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096418" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 3: &uarr;3 и &darr;0">+3</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 5 ноября 2008 в 14:55</time>

            <a href="#comment_1096418" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096418" data-parent_id="1096394" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096394" data-id="1096418" data-parent_id="1096394" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            По-моему, «тавтология» в данном случае — намеренно добавленная фигура речи, как бы «демонстрирующая» рекурсию. Т.е. это не ошибка.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096418">
        <div class="comment_item" id="comment_1096436" >

    <span class="parent_id" data-parent_id="1096418"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096436">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096436" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/BisnoyZakat/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/BisnoyZakat/" class="username">BisnoyZakat</a>
            <time> 5 ноября 2008 в 15:01</time>

            <a href="#comment_1096436" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096436" data-parent_id="1096418" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096418" data-id="1096436" data-parent_id="1096418" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            спасибо :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096436">
    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096455" >

    <span class="parent_id" data-parent_id="1096394"></span>
    <div class="comment_body ">
        <div class="author_banned">НЛО прилетело и опубликовало эту надпись здесь</div>
    </div>

    <div class="reply_comments" id="reply_comments_1096455">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096046" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096046">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096046" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/MisterX/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/e72/fa3/3ec/e72fa33ec96b5ac2d7586e49e2fdf460_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/MisterX/" class="username">MisterX</a>
            <time> 5 ноября 2008 в 12:16</time>

            <a href="#comment_1096046" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Nested Sets, не требует рекурсии, правда все очень интересно запутано, но если один раз распутатся и написать клас обертку, то потом можно не заморачиватся. Вот отличная статейка с примерами <a href="http://www.getinfo.ru/article610.html">www.getinfo.ru/article610.html</a> 
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096046">
        <div class="comment_item" id="comment_1096149" >

    <span class="parent_id" data-parent_id="1096046"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096149">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096149" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/ginius/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/6f2/18e/6b0/6f218e6b06cd55fb792e682e16abeb6f_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/ginius/" class="username">ginius</a>
            <time> 5 ноября 2008 в 13:04</time>

            <a href="#comment_1096149" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096149" data-parent_id="1096046" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096046" data-id="1096149" data-parent_id="1096046" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Удаление элемента из netsted set очень ресурсоемкая операция.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096149">
        <div class="comment_item" id="comment_1096273" >

    <span class="parent_id" data-parent_id="1096149"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096273">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096273" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/MisterX/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/e72/fa3/3ec/e72fa33ec96b5ac2d7586e49e2fdf460_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/MisterX/" class="username">MisterX</a>
            <time> 5 ноября 2008 в 14:04</time>

            <a href="#comment_1096273" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096273" data-parent_id="1096149" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096149" data-id="1096273" data-parent_id="1096149" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Согласен, но вобщем все зависит от задачи, например в моей задаче то иерархический список только дополняется обьектами, ну и выборка само собой. Но зато плюс в том что не нужна никакая рекурсия, и это мне определенно нравится.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096273">
        <div class="comment_item" id="comment_1096290" >

    <span class="parent_id" data-parent_id="1096273"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096290">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096290" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/MisterX/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/e72/fa3/3ec/e72fa33ec96b5ac2d7586e49e2fdf460_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/MisterX/" class="username">MisterX</a>
            <time> 5 ноября 2008 в 14:11</time>

            <a href="#comment_1096290" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096290" data-parent_id="1096273" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096273" data-id="1096290" data-parent_id="1096273" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Хотя… может и мнение мое субьективное, всетаки еще смотря от количества элементов… тоесть при одном-десяти элэментах, разницы в скорости, что например это долго, я не видел. Возможно при большем количестве обьектов буду видеть разницу скорости. Но повторю что сама структура хранения и операции над ней мне нравятся, хоть и не доходил до пиковых каких-то пределов.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096290">
    </div>
</div>

        <div class="comment_item" id="comment_1096315" >

    <span class="parent_id" data-parent_id="1096273"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096315">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096315" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:22</time>

            <a href="#comment_1096315" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096315" data-parent_id="1096273" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096273" data-id="1096315" data-parent_id="1096273" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Рекурсия — это зло. <br/>
Когда разработчик теряет контроль над запросами (а в рекурсии так оно есть) — жди «дауна»
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096315">
        <div class="comment_item" id="comment_1096339" >

    <span class="parent_id" data-parent_id="1096315"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096339">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096339" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/MisterX/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/e72/fa3/3ec/e72fa33ec96b5ac2d7586e49e2fdf460_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/MisterX/" class="username">MisterX</a>
            <time> 5 ноября 2008 в 14:34</time>

            <a href="#comment_1096339" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096339" data-parent_id="1096315" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096315" data-id="1096339" data-parent_id="1096315" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            За то что рекурсия это зло, я согласен, поэтому ее не использую =) Ну в крайнем случае если есть обходной вариант =) Поэтому и использую NS =)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096339">
        <div class="comment_item" id="comment_1096362" >

    <span class="parent_id" data-parent_id="1096339"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096362">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096362" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:43</time>

            <a href="#comment_1096362" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096362" data-parent_id="1096339" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096339" data-id="1096362" data-parent_id="1096339" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Слава богу от NS я избавился и ничуть не сожалею. Наоборот.<br/>
Пользуюсь совсем другим алгоритмом.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096362">
        <div class="comment_item" id="comment_1096381" >

    <span class="parent_id" data-parent_id="1096362"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096381">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096381" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/MisterX/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/e72/fa3/3ec/e72fa33ec96b5ac2d7586e49e2fdf460_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/MisterX/" class="username">MisterX</a>
            <time> 5 ноября 2008 в 14:49</time>

            <a href="#comment_1096381" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096381" data-parent_id="1096362" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096362" data-id="1096381" data-parent_id="1096362" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я за Вас очень рад, но в паблике более достойного я не нашел чем НС, а изучать эту проблему времни небыло, был бы ваш алгоритм в паблике, про который можно почитать, может быть и воспользовался бы им =) А так достойной альтернативы не нашел.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096381">
        <div class="comment_item" id="comment_1096446" >

    <span class="parent_id" data-parent_id="1096381"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096446">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096446" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 1: &uarr;0 и &darr;1">–1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 15:03</time>

            <a href="#comment_1096446" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096446" data-parent_id="1096381" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096381" data-id="1096446" data-parent_id="1096381" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad1">
            Согласен, пока не доделаю коробку для CMS в паблик сами понимаете не положу :\<br/>
Но бета тестрование проходит. Но только на соглашении о неразглашении, и еще кучей требований…
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096446">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096306" >

    <span class="parent_id" data-parent_id="1096149"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096306">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096306" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:19</time>

            <a href="#comment_1096306" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096306" data-parent_id="1096149" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096149" data-id="1096306" data-parent_id="1096149" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            И еще забыли добавить… если вдруг сбой (потеря например записи)… при NS нарушается целостность структуры…<br/>
NS это скорее псеводоиерархия. Какае-то «плоская иерархия» :)<br/>
А вообще, про все это я написал <a href="http://habrahabr.ru/blogs/sql/43955/#comment_1096264">выше</a> 
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096306">
        <div class="comment_item" id="comment_1096310" >

    <span class="parent_id" data-parent_id="1096306"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096310">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096310" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:20</time>

            <a href="#comment_1096310" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096310" data-parent_id="1096306" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096306" data-id="1096310" data-parent_id="1096306" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Да и распараллелить (если нагрузка) NS невозможно «по человечески»…
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096310">
    </div>
</div>

        <div class="comment_item" id="comment_1097037" >

    <span class="parent_id" data-parent_id="1096306"></span>
    <div class="comment_body ">
        <div class="author_banned">НЛО прилетело и опубликовало эту надпись здесь</div>
    </div>

    <div class="reply_comments" id="reply_comments_1097037">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096095" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096095">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096095" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/fear86/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/e83/574/cba/e83574cba8d35fb7e068a844b9c2ae04_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/fear86/" class="username">fear86</a>
            <time> 5 ноября 2008 в 12:39</time>

            <a href="#comment_1096095" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я вот недавно реализовал дерево так:<br/>
<br/>
выбрал все данные из базы в одномерный масив обьектов, где сделал индек равный ID<br/>
затем делаю один проход в цикле и если PID не равен нулю делаю такую штуку:<br/>
<br/>
$pages[PID]-&gt;child = &$pages[ID];<br/>
<br/>
Интересует мнение имеет ли такое решение право на жизнь?<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096095">
        <div class="comment_item" id="comment_1096190" >

    <span class="parent_id" data-parent_id="1096095"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096190">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096190" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/no_smoking/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/7fc/6b9/2f0/7fc6b92f091984ddad98ef411e39b274_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/no_smoking/" class="username">no_smoking</a>
            <time> 5 ноября 2008 в 13:27</time>

            <a href="#comment_1096190" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096190" data-parent_id="1096095" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096095" data-id="1096190" data-parent_id="1096095" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Проблема выбрать значение только одной какой нибудь ветки.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096190">
    </div>
</div>

        <div class="comment_item" id="comment_1096363" >

    <span class="parent_id" data-parent_id="1096095"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096363">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096363" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Fally/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/Fally/" class="username">Fally</a>
            <time> 5 ноября 2008 в 14:43</time>

            <a href="#comment_1096363" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096363" data-parent_id="1096095" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096095" data-id="1096363" data-parent_id="1096095" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Такое решение имеет право на жизнь, при сравнительно небольшом количестве элементов, но пример вашего кода так будет выглядеть правильнее: $pages[PID]-&gt;child<b>[]</b> = &$pages[ID];<br/>
А в противном случае у каждого узла может быть _только_ по одному варианту…
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096363">
        <div class="comment_item" id="comment_1096395" >

    <span class="parent_id" data-parent_id="1096363"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096395">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096395" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/fear86/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/e83/574/cba/e83574cba8d35fb7e068a844b9c2ae04_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/fear86/" class="username">fear86</a>
            <time> 5 ноября 2008 в 14:52</time>

            <a href="#comment_1096395" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096395" data-parent_id="1096363" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096363" data-id="1096395" data-parent_id="1096363" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Простите очепятался…
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096395">
    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096372" >

    <span class="parent_id" data-parent_id="1096095"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096372">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096372" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 3: &uarr;0 и &darr;3">–3</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:45</time>

            <a href="#comment_1096372" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096372" data-parent_id="1096095" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096095" data-id="1096372" data-parent_id="1096095" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad3">
            Тоже ресурсоемкий… есть подход гараздо легче.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096372">
    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096108" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096108">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096108" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/trak/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/ee2/c32/3b1/ee2c323b164733fb71c0f8e22c233895_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/trak/" class="username">trak</a>
            <time> 5 ноября 2008 в 12:45</time>

            <a href="#comment_1096108" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Ну вот, теперь нам, ораклоидам, все завидывать будут! :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096108">
    </div>
</div>

            <div class="comment_item" id="comment_1096121" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096121">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096121" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Nrs/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/Nrs/" class="username">Nrs</a>
            <time> 5 ноября 2008 в 12:49</time>

            <a href="#comment_1096121" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Спасибо, очень интересно. 
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096121">
    </div>
</div>

            <div class="comment_item" id="comment_1096145" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096145">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096145" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 1: &uarr;0 и &darr;1">–1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/mkechinov/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/4aa/011/6bf/4aa0116bf15350f790a1a7e306d1c11a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/mkechinov/" class="username">mkechinov</a>
            <time> 5 ноября 2008 в 13:01</time>

            <a href="#comment_1096145" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad1">
            Рекурсия порой печально, но иногда приходится.<br/>
Можно пойти немного по-другому способу:<br/>
<br/>
id (varchar) | title (varchar)<br/>
aa | Россия<br/>
aaaa | Москва<br/>
aaab | Санкт-Петербург<br/>
aaabaa | Павловск<br/>
aaabab | Торфяное<br/>
aaac | Владивосток<br/>
…<br/>
aaza | Мухосранск<br/>
ab | Англия<br/>
ac | Китай<br/>
<br/>
Как выбрать всю ветку из России?<br/>
<br/>
Пишу по-русски, т.к. MySQL давно не использовал<br/>
<br/>
ВЫБРАТЬ ВСЁ, ЧТО В ИДЕНТИФИКАТОРЕ НАЧИНАЕТСЯ С 'aa'.<br/>
<br/>
Как выбрать всю ветку из России, не включая Россию?<br/>
<br/>
ВЫБРАТЬ ВСЁ, ЧТО В ИДЕНТИФИКАТОРЕ НАЧИНАЕТСЯ С 'aa' И STRLEN(id) &gt; STRLEN('aa')<br/>
<br/>
Ну и т.д. Вдруг кому пригодится.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096145">
        <div class="comment_item" id="comment_1096156" >

    <span class="parent_id" data-parent_id="1096145"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096156">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096156" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/TedBeer/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/160/a3e/c9e/160a3ec9efa56b9a7ea7c11732814673_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/TedBeer/" class="username">TedBeer</a>
            <time> 5 ноября 2008 в 13:08</time>

            <a href="#comment_1096156" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096156" data-parent_id="1096145" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096145" data-id="1096156" data-parent_id="1096145" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            а теперь передвиньте Санкт-Петербург в Китай! Придется менять рекурсивно все потомки! вместо одно только Питера
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096156">
        <div class="comment_item" id="comment_1096165" >

    <span class="parent_id" data-parent_id="1096156"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096165">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096165" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/mkechinov/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/4aa/011/6bf/4aa0116bf15350f790a1a7e306d1c11a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/mkechinov/" class="username">mkechinov</a>
            <time> 5 ноября 2008 в 13:12</time>

            <a href="#comment_1096165" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096165" data-parent_id="1096156" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096156" data-id="1096165" data-parent_id="1096156" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            UPDATE table SET id = CONCAT( [id-китая], SUBSTR( id, STRLEN([id-России]) ) WHERE SUBSTR(id, 0, STRLEN([id-России]) = [id-России]<br/>
<br/>
Один запрос
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096165">
        <div class="comment_item" id="comment_1096205" >

    <span class="parent_id" data-parent_id="1096165"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096205">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096205" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/TedBeer/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/160/a3e/c9e/160a3ec9efa56b9a7ea7c11732814673_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/TedBeer/" class="username">TedBeer</a>
            <time> 5 ноября 2008 в 13:33</time>

            <a href="#comment_1096205" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096205" data-parent_id="1096165" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096165" data-id="1096205" data-parent_id="1096165" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            не о количестве запросов же речь, а о количестве редактируемых записей
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096205">
        <div class="comment_item" id="comment_1096212" >

    <span class="parent_id" data-parent_id="1096205"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096212">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096212" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/mkechinov/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/4aa/011/6bf/4aa0116bf15350f790a1a7e306d1c11a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/mkechinov/" class="username">mkechinov</a>
            <time> 5 ноября 2008 в 13:38</time>

            <a href="#comment_1096212" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096212" data-parent_id="1096205" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096205" data-id="1096212" data-parent_id="1096205" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Перенос ветки — не часто выполняемая операция. Обработать пару миллионов записей один раз в месяц можно.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096212">
        <div class="comment_item" id="comment_1096224" >

    <span class="parent_id" data-parent_id="1096212"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096224">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096224" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/TedBeer/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/160/a3e/c9e/160a3ec9efa56b9a7ea7c11732814673_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/TedBeer/" class="username">TedBeer</a>
            <time> 5 ноября 2008 в 13:43</time>

            <a href="#comment_1096224" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096224" data-parent_id="1096212" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096212" data-id="1096224" data-parent_id="1096212" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            ну я не был бы столь категоричен.<br/>
соглашусь, что в большинстве случаев применения деревьев, модификация не частый случай<br/>
но например в разных оптимизационных задачах это может быть рутинной операцией исполняемой тысячи и миллионы раз
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096224">
        <div class="comment_item" id="comment_1096235" >

    <span class="parent_id" data-parent_id="1096224"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096235">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096235" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 3: &uarr;3 и &darr;0">+3</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/mkechinov/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/4aa/011/6bf/4aa0116bf15350f790a1a7e306d1c11a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/mkechinov/" class="username">mkechinov</a>
            <time> 5 ноября 2008 в 13:47</time>

            <a href="#comment_1096235" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096235" data-parent_id="1096224" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096224" data-id="1096235" data-parent_id="1096224" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Проблема программистов в том, что для них есть только 3 числа: 0, 1 и бесконечность. Т.е., числа 350 нет. Программист не может осознать тот факт, что как не старайся, но в данном случае не будет больше 350 элементов. Если элементов больше одного, то надо сделать так, чтобы работало и 2 элемента и 2 миллиона элементов. Хотя ведь их ну никак не будет больше 350. Это не в обиду, это одно из наблюдений проектировщиков интерфейсов. Я лишь цитирую. Число 350 взято с потолка, также может быть и 14.<br/>
<br/>
Разные оптимизационные задачи составляют не такой уж и большой процент от общего числа задач. Да, я не настаиваю на том, что этот подход суперотличен. Я им сам уже давно не пользуюсь. Но для интернет-магазина с рубрикатором до 100 веток его вполне достаточно.<br/>
<br/>
А сейчас я использую ltree в PostgreSQL. Вполне себе неплохо. Принцип немного похож. На нем работает dmoz.org, так что с производительностью там тоже неплохо.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096235">
        <div class="comment_item" id="comment_1096242" >

    <span class="parent_id" data-parent_id="1096235"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096242">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096242" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/TedBeer/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/160/a3e/c9e/160a3ec9efa56b9a7ea7c11732814673_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/TedBeer/" class="username">TedBeer</a>
            <time> 5 ноября 2008 в 13:50</time>

            <a href="#comment_1096242" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096242" data-parent_id="1096235" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096235" data-id="1096242" data-parent_id="1096235" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            :-) Нет в жизни счастья для всех, оно есть только для каждого в отдельности<br/>
И в каждом случае придется идти на какой-нибудь компромисс
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096242">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096375" >

    <span class="parent_id" data-parent_id="1096165"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096375">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096375" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:47</time>

            <a href="#comment_1096375" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096375" data-parent_id="1096165" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096165" data-id="1096375" data-parent_id="1096165" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Ребята если вы такой запрос покажите в нормальной фирме… с вами и разговаривать не будут…<br/>
извините конечно… но подставлять тут же высчитываемые данные при помощи CONCAT SUBSTR знаете что сделает? Подумайте сами.<br/>
Я дам подсказку: index<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096375">
        <div class="comment_item" id="comment_1096392" >

    <span class="parent_id" data-parent_id="1096375"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096392">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096392" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/mkechinov/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/4aa/011/6bf/4aa0116bf15350f790a1a7e306d1c11a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/mkechinov/" class="username">mkechinov</a>
            <time> 5 ноября 2008 в 14:51</time>

            <a href="#comment_1096392" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096392" data-parent_id="1096375" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096375" data-id="1096392" data-parent_id="1096375" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я это написал для того, чтобы показать, что это можно сделать одним запросом. Не ставя задачу, сделать это быстро и сверхкачественно. К тому же MySQL-ем уже давно не пользуюсь, поэтому и данный способ не использую. Ну и в дополнение, как я уже писал выше: для дерева из 100 веток этот запрос не смертелен. Для 1000 тоже. А для бесконечности — часто ли такие задачи возникают?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096392">
        <div class="comment_item" id="comment_1096462" >

    <span class="parent_id" data-parent_id="1096392"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096462">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096462" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 15:07</time>

            <a href="#comment_1096462" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096462" data-parent_id="1096392" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096392" data-id="1096462" data-parent_id="1096392" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Одним запросом? union фактически еще подключение запроса, плюс ко всему рекурсия… это совсем не «один» запрос.<br/>
<br/>
На вторую часть вопроса отвечу…<br/>
для бухгалтерии не смертельно, они ждут отчетов и по полчаса…<br/>
для web-а — 1 секунад это уже вечность…<br/>
По маркетинговым исследованиям, если юзер не увидел страницу в течении 5-х секунд, 80% (для 3-х — 60%) — что он её закроет и больше не зайдет… для Web-a это равносильно гибели проекта.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096462">
        <div class="comment_item" id="comment_1096470" >

    <span class="parent_id" data-parent_id="1096462"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096470">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096470" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/mkechinov/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/4aa/011/6bf/4aa0116bf15350f790a1a7e306d1c11a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/mkechinov/" class="username">mkechinov</a>
            <time> 5 ноября 2008 в 15:10</time>

            <a href="#comment_1096470" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096470" data-parent_id="1096462" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096462" data-id="1096470" data-parent_id="1096462" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Этсамое. Не понял, где вы увидели UNION?<br/>
<br/>
Что касается 5 секунд, вопрос мне стоял про перемещение одной большой ветки в другую. Обычно это делает администратор раз в полгода, ну уж никак не пользователь по несколько раз в минуту.<br/>
<br/>
Или мы на разные темы говорим?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096470">
    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096467" >

    <span class="parent_id" data-parent_id="1096392"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096467">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096467" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 15:09</time>

            <a href="#comment_1096467" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096467" data-parent_id="1096392" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096392" data-id="1096467" data-parent_id="1096392" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Ой сорри я немного перепутал…<br/>
1-ю часть ответа это автору статьи :)<br/>
Но вторая часть ответа подходит и под первую…<br/>
Вы проверяли как у вас в таких запросах используются индексы?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096467">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1096174" >

    <span class="parent_id" data-parent_id="1096145"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096174">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096174" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 5 ноября 2008 в 13:18</time>

            <a href="#comment_1096174" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096174" data-parent_id="1096145" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096145" data-id="1096174" data-parent_id="1096145" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Тут проблема: а если буквы алфавита кончатся?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096174">
        <div class="comment_item" id="comment_1096180" >

    <span class="parent_id" data-parent_id="1096174"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096180">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096180" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/mkechinov/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/4aa/011/6bf/4aa0116bf15350f790a1a7e306d1c11a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/mkechinov/" class="username">mkechinov</a>
            <time> 5 ноября 2008 в 13:22</time>

            <a href="#comment_1096180" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096180" data-parent_id="1096174" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096174" data-id="1096180" data-parent_id="1096174" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Все деревья конечны. Не бывает бесконечных деревьев. Если планируется делать ну очень огромный список, можно составные части ключей делать не из двух символов, а из 5 или 10.<br/>
Сколько вариантов может дать звено из 10 англоязычных символов? Если я правильно помню математику, то либо 10^26 либо 26^10. Нормально получается.<br/>
На самом деле и 5 хватит: 5^26 = 1490116119384765625 вариантов соседей одной ветки.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096180">
        <div class="comment_item" id="comment_1096404" >

    <span class="parent_id" data-parent_id="1096180"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096404">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096404" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 5 ноября 2008 в 14:53</time>

            <a href="#comment_1096404" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096404" data-parent_id="1096180" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096180" data-id="1096404" data-parent_id="1096180" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Уж математику-то я напомню: 10 символов, каждый имеет 26 разных значений — 26^10 вариантов (проверочное слово: 8 символов, 2 различных значения — 2^8 = 256 вариантов).<br/>
<br/>
Неудобно всё равно получается со строкой. Хотя в типичных проектах (скажем, тот же хабр) действительно такая строка в целом не разрастётся больше, скажем, 20-ти символов. Комментарии более 10 уровней нечасто попадаются :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096404">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096225" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096225">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096225" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/wdk/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/wdk/" class="username">wdk</a>
            <time> 5 ноября 2008 в 13:43</time>

            <a href="#comment_1096225" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            С рекурсиями в запросах давно разобрался для MS SQL и Oracle, но всё равно почитал с удовольствием, спасибо!
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096225">
    </div>
</div>

            <div class="comment_item" id="comment_1096230" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096230">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096230" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/f1tz/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/b31/ab0/42c/b31ab042cb8f71d0db0ed94548b17733_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/f1tz/" class="username">f1tz</a>
            <time> 5 ноября 2008 в 13:46</time>

            <a href="#comment_1096230" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Интересно почитать про реализацию в PostgreSQL
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096230">
        <div class="comment_item" id="comment_1096249" >

    <span class="parent_id" data-parent_id="1096230"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096249">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096249" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/mkechinov/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/4aa/011/6bf/4aa0116bf15350f790a1a7e306d1c11a_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/mkechinov/" class="username">mkechinov</a>
            <time> 5 ноября 2008 в 13:52</time>

            <a href="#comment_1096249" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096249" data-parent_id="1096230" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096230" data-id="1096249" data-parent_id="1096230" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Тип данных ltree: <a href="http://www.postgresql.org/docs/8.3/static/ltree.html">www.postgresql.org/docs/8.3/static/ltree.html</a>
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096249">
    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096248" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096248">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096248" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/fl00r/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/8ee/346/d1d/8ee346d1db7357165aa68b0045c20314_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/fl00r/" class="username">fl00r</a>
            <time> 5 ноября 2008 в 13:52</time>

            <a href="#comment_1096248" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Рекурсия — весьма себе ресурсоемкий процесс. Кроме того требующий от разработчика наличия определенной фантазии. А иногда вообще ставит в тупик и ощущения безысходности и опустошения =))<br/>
(опечатался по Фрейду — написал безысКОДности — успел исправить)<br/>
<br/>
Поэтому я больше ими не пользуюсь. Один умный парень придумал Nested Sets — и это очень sexy.<br/>
<a href="http://www.dbmsmag.com/9603d06.html">www.dbmsmag.com/9603d06.html</a><br/>
<a href="http://threebit.net/tutorials/nestedset/tutorial1.html">threebit.net/tutorials/nestedset/tutorial1.html</a><br/>
а вот по-русски<br/>
<a href="http://www.getinfo.ru/article610.html">www.getinfo.ru/article610.html</a><br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096248">
        <div class="comment_item" id="comment_1096251" >

    <span class="parent_id" data-parent_id="1096248"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096251">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096251" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/fl00r/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/8ee/346/d1d/8ee346d1db7357165aa68b0045c20314_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/fl00r/" class="username">fl00r</a>
            <time> 5 ноября 2008 в 13:54</time>

            <a href="#comment_1096251" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096251" data-parent_id="1096248" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096248" data-id="1096251" data-parent_id="1096248" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Смотрю, про Нестид Сетс уже упомянали здесь.<br/>
В любом случае, эта тема достойна отдельного поста.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096251">
    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096291" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="author_banned">НЛО прилетело и опубликовало эту надпись здесь</div>
    </div>

    <div class="reply_comments" id="reply_comments_1096291">
        <div class="comment_item" id="comment_1096322" >

    <span class="parent_id" data-parent_id="1096291"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096322">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096322" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 4: &uarr;1 и &darr;3">–2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:26</time>

            <a href="#comment_1096322" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096322" data-parent_id="1096291" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096291" data-id="1096322" data-parent_id="1096291" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad2">
            NS тоже не выход, существует лучше алгоритм :)<br/>
<a href="http://habrahabr.ru/blogs/sql/43955/#comment_1096264">здесь :)</a><br/>
NS это плоская псевдоиерархия, которая тяжело распараллеливается, у которой целостность слабая… да и еще много недостатков.<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096322">
    </div>
</div>

        <div class="comment_item" id="comment_1096443" >

    <span class="parent_id" data-parent_id="1096291"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096443">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096443" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/hell/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/hell/" class="username">hell</a>
            <time> 5 ноября 2008 в 15:03</time>

            <a href="#comment_1096443" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096443" data-parent_id="1096291" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096291" data-id="1096443" data-parent_id="1096291" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            вставляет, конечно, подольше.<br/>
где-то начиная с тысячного узла в середку дерева аккурат по минуте на узел (дерево многоуровневое и ветвистое).<br/>
это уже (sorry for my english), не вставляет ни фига.<br/>
а вообще самая большая проблема с деревьями — не выбора ветки от единого родителя (эта вещь оптимально делается не рекурсией, а скорее циклом — поличество запросов равно уровню вложенности, посему в самом худшем случае (дерево у нас — лиана или виноград какой-то, и каждая ветка имеет ровно одного потомка) эта штука будет работать с той же скоростью, что рекурсия, в лучшем же — намного быстрее) а правильной сортировки выбранного. И тут возможны варианты (помимо nested sets — потому как с обновлениями и вставками на нем все просто совсем ахово получается). <br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096443">
        <div class="comment_item" id="comment_1096490" >

    <span class="parent_id" data-parent_id="1096443"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096490">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096490" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 2: &uarr;0 и &darr;2">–2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 15:16</time>

            <a href="#comment_1096490" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096490" data-parent_id="1096443" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096443" data-id="1096490" data-parent_id="1096443" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad2">
            Ага это NS — узнаю :)<br/>
Знаете, есть алгоритмы быстрее, вот что я скажу… я выше писал уже о них.<br/>
NS — плоский псевдоиерархический алгоритм, с кучей недостатков. Вот просто в паблике пока ничего нет лучше… а в коммерческих проектах — есть :)<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096490">
        <div class="comment_item" id="comment_1096537" >

    <span class="parent_id" data-parent_id="1096490"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096537">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096537" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/hell/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/hell/" class="username">hell</a>
            <time> 5 ноября 2008 в 15:34</time>

            <a href="#comment_1096537" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096537" data-parent_id="1096490" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096490" data-id="1096537" data-parent_id="1096490" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            ну, мы тоже используем свои алгоритмы. Правда, разрабатываем их чуть подольше. В целом сейчас оно уже работает вполне удволетворительно (кусок дерева — чтобы использовались индексы — вложенностью 10, объемом где-то в 30000 узлов отрабатывается примерно за 1 — 2 секунды, а с закешированным запросом — раз в 100 быстрее). Правда, наше решение катит только под PostgreSQL (возможно будет работать и под ораклом, если оно шагнуло вперед после 2001 года).<br/>
А под мускуль существует альтернатива на dklab — изящный и очень быстрый запрос, правда, с ограничением по вложенности — не более 32 уровней (или 31). 
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096537">
        <div class="comment_item" id="comment_1096769" >

    <span class="parent_id" data-parent_id="1096537"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096769">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096769" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 17:12</time>

            <a href="#comment_1096769" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096769" data-parent_id="1096537" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096537" data-id="1096769" data-parent_id="1096537" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я тестировал на уровнях вложенности ~20 (больше у меня почему-то не получается придумать для Web задачи :)<br/>
и 100`000 записях (сколько узлов не считал), главная страница… Ctrl-P: <br/>
Всего 32: 0.025<br/>
Всего &php: 0.241<br/>
<br/>
На сколько я помню на dklab всё что связано с иерархией затихло… тот алгоритм что у них есть, назвать тяжело алгоритмом.<br/>
Он очень сырой… люди там встретили трудности (а трудности там были немалые, да еще и с кучей join) и… забросили всё это дело подальше :) Это было кажется года 2-3 назад… dbtree кажись называлась. <br/>
<br/>
:) Могу теперь с оглядкой на 3 года назад только улыбнуться :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096769">
        <div class="comment_item" id="comment_1097840" >

    <span class="parent_id" data-parent_id="1096769"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097840">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097840" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/IlVin/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/IlVin/" class="username">IlVin</a>
            <time> 6 ноября 2008 в 02:16</time>

            <a href="#comment_1097840" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097840" data-parent_id="1096769" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096769" data-id="1097840" data-parent_id="1096769" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Гы. Я использую, правда для вложенности не более 3-х.<br/>
И только для вычисления агрегатной таблицы.<br/>
Преимущество этого способа вижу только в том, что он обладает атомарностью — во время выполнения никакая зараза не сможет модифицировать MyISAM таблицу.<br/>
Минус у способа один и очень существенный — размер SQL запроса сильно увеличивается с уровнем вложенности.<br/>
Но этот монстроидальный запрос работает довольно шустро.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097840">
        <div class="comment_item" id="comment_1098261" >

    <span class="parent_id" data-parent_id="1097840"></span>
    <div class="comment_body ">
        <div class="info  " rel="1098261">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098261" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 6 ноября 2008 в 10:47</time>

            <a href="#comment_1098261" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098261" data-parent_id="1097840" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097840" data-id="1098261" data-parent_id="1097840" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Размер увеличивается join-ами?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098261">
        <div class="comment_item" id="comment_1098292" >

    <span class="parent_id" data-parent_id="1098261"></span>
    <div class="comment_body ">
        <div class="info  " rel="1098292">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098292" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/IlVin/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/IlVin/" class="username">IlVin</a>
            <time> 6 ноября 2008 в 10:59</time>

            <a href="#comment_1098292" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098292" data-parent_id="1098261" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1098261" data-id="1098292" data-parent_id="1098261" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            join`ы — это сущие пустяки. Проблема в вычислении нужных полей — приходится много условий проверять, чтобы определить какого уровня текущая запись. Если подскажете как оптимизировать, с удовольствием перейму опыт :)<br/>
Запрос такой (алгоритм тщательно не разрабатывался и не скрывается от общественности):<br/>
<br/>
UPDATE catalog_tree, (<br/>
SELECT t0.cid,<br/>
CASE WHEN t0.pid=0 THEN t0.shown<br/>
WHEN t1.pid=0 AND t0.shown&gt;0 THEN t1.shown<br/>
WHEN t2.pid=0 AND t0.shown&gt;0 AND t1.shown&gt;0 THEN t2.shown<br/>
ELSE 0 END AS shown,<br/>
<br/>
CASE WHEN t0.pid=0 THEN 0<br/>
WHEN t1.pid=0 THEN 1<br/>
ELSE 2 END AS level,<br/>
<br/>
CASE WHEN t0.pid=0 THEN t0.cid<br/>
WHEN t1.pid=0 THEN t1.cid<br/>
WHEN t2.pid=0 THEN t2.cid<br/>
ELSE 0 END AS id0,<br/>
<br/>
CASE WHEN t0.pid=0 THEN t0.title<br/>
WHEN t1.pid=0 THEN t1.title<br/>
WHEN t2.pid=0 THEN t2.title<br/>
ELSE 0 END AS title0,<br/>
<br/>
CASE WHEN t0.pid=0 THEN 0<br/>
WHEN t1.pid=0 THEN t0.cid<br/>
WHEN t2.pid=0 THEN t1.cid<br/>
ELSE 0 END AS id1,<br/>
<br/>
CASE WHEN t0.pid=0 THEN ''<br/>
WHEN t1.pid=0 THEN t0.title<br/>
WHEN t2.pid=0 THEN t1.title<br/>
ELSE 0 END AS title1,<br/>
<br/>
CASE WHEN t0.pid=0 THEN 0<br/>
WHEN t1.pid=0 THEN 0<br/>
WHEN t2.pid=0 THEN t0.cid<br/>
ELSE 0 END AS id2,<br/>
<br/>
CASE WHEN t0.pid=0 THEN ''<br/>
WHEN t1.pid=0 THEN ''<br/>
WHEN t2.pid=0 THEN t0.title<br/>
ELSE 0 END AS title2,<br/>
<br/>
CASE WHEN t0.pid=0 THEN CONCAT(LPAD(HEX(t0.sort),4,'0'),LPAD(HEX(t0.cid),8,'0'),'000000000000000000000000')<br/>
WHEN t1.pid=0 THEN CONCAT(LPAD(HEX(t1.sort),4,'0'),LPAD(HEX(t1.cid),8,'0'),<br/>
LPAD(HEX(t0.sort),4,'0'),LPAD(HEX(t0.cid),8,'0'),'000000000000')<br/>
WHEN t2.pid=0 THEN CONCAT(LPAD(HEX(t2.sort),4,'0'),LPAD(HEX(t2.cid),8,'0'),<br/>
LPAD(HEX(t1.sort),4,'0'),LPAD(HEX(t1.cid),8,'0'),<br/>
LPAD(HEX(t0.sort),4,'0'),LPAD(HEX(t0.cid),8,'0')) END AS srt<br/>
FROM<br/>
catalog_tree t0<br/>
LEFT JOIN catalog_tree t1 ON (t0.pid=t1.cid)<br/>
LEFT JOIN catalog_tree t2 ON (t1.pid=t2.cid)<br/>
) AS v_catalog_tree<br/>
SET catalog_tree.shown=v_catalog_tree.shown,<br/>
catalog_tree.level=v_catalog_tree.level,<br/>
catalog_tree.id0=v_catalog_tree.id0,<br/>
catalog_tree.title0=v_catalog_tree.title0,<br/>
catalog_tree.id1=v_catalog_tree.id1,<br/>
catalog_tree.title1=v_catalog_tree.title1,<br/>
catalog_tree.id3=v_catalog_tree.id3,<br/>
catalog_tree.title3=v_catalog_tree.title3,<br/>
catalog_tree.srt=v_catalog_tree.srt<br/>
WHERE catalog_tree.cid=v_catalog_tree.cid
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098292">
        <div class="comment_item" id="comment_1098317" >

    <span class="parent_id" data-parent_id="1098292"></span>
    <div class="comment_body ">
        <div class="info  " rel="1098317">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098317" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/IlVin/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/IlVin/" class="username">IlVin</a>
            <time> 6 ноября 2008 в 11:08</time>

            <a href="#comment_1098317" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098317" data-parent_id="1098292" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1098292" data-id="1098317" data-parent_id="1098292" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Небольшое пояснение. Дерево построено по простейшей схеме родитель-ребенок.<br/>
Введены вычислимые поля сортировки и пути к корню для ускорения выборок и осуществления обратной совместимости со старой версией каталога, которая дерево держала в 3-х таблицах.<br/>
<br/>
PS: Уже можно насчитать 5 способов хранения дерева в таблице:<br/>
1) id-parent_id<br/>
2) NS<br/>
3) Path to root<br/>
4) Разбиение каждого уровня по отдельным таблицам<br/>
5) X — загадочный очень производительный способ, но не известный общественности :)<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098317">
        <div class="comment_item" id="comment_1098742" >

    <span class="parent_id" data-parent_id="1098317"></span>
    <div class="comment_body ">
        <div class="info  " rel="1098742">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098742" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 6 ноября 2008 в 13:00</time>

            <a href="#comment_1098742" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098742" data-parent_id="1098317" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1098317" data-id="1098742" data-parent_id="1098317" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Могу посоветовать как делает IBM в своих коммерческих программах…<br/>
Они хранят id-шники ветки<br/>
<br/>
id | id1 | id2 | id3…<br/>
<br/>
где если ничего нет то 0, всей ветки т.е. последний id ветки будет свой же id<br/>
<br/>
тогда очень легко делать и выборку и обновление… если знаешь id узла спокойно апдейтишь<br/>
в стиле UPDATE… WHERE id3 (например) = 12345<br/>
<br/>
и в таком же духе…<br/>
<br/>
А выборку тоже очень легко делать<br/>
<br/>
SELECT<br/>
…<br/>
WHERE<br/>
id2 =2<br/>
<br/>
// и ограничиваем по ветке<br/>
id5=0<br/>
<br/>
Немного избыточно, но очень быстро и очень гибко.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098742">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096332" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096332">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096332" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/pilot/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/c02/dee/f33/c02deef338fed018dbd69b0aa47a44ee_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/pilot/" class="username">pilot</a>
            <time> 5 ноября 2008 в 14:32</time>

            <a href="#comment_1096332" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Пора бы уже mysql добавить возможность работы с рекурсивными запросами.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096332">
        <div class="comment_item" id="comment_1096379" >

    <span class="parent_id" data-parent_id="1096332"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096379">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096379" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 14:49</time>

            <a href="#comment_1096379" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096379" data-parent_id="1096332" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096332" data-id="1096379" data-parent_id="1096332" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Если грамотно подойти — его можно приручить, причем с 4-й версии (даже с 3-й) :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096379">
        <div class="comment_item" id="comment_1096773" >

    <span class="parent_id" data-parent_id="1096379"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096773">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096773" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 17:16</time>

            <a href="#comment_1096773" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096773" data-parent_id="1096379" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096379" data-id="1096773" data-parent_id="1096379" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я имел ввиду с иерархическими…<br/>
Если вы хотите скорость и выдерживать большие нагрузки…<br/>
Запомните, рекурсия в архитектуре БД — ЗЛО
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096773">
    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096382" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096382">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096382" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/BAHO/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/769/c89/f59/769c89f59ba36e83de675ccfd10358f4_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/BAHO/" class="username">BAHO</a>
            <time> 5 ноября 2008 в 14:49</time>

            <a href="#comment_1096382" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Эмм, по поводу MySQL…<br/>
<br/>
set @a = '444'; # root id<br/>
select *, @a := concat_ws(',', @a, ID) from TreeItems where parentID IN (@a);<br/>
<br/>
Разве не подходит? Или я что-то упустил?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096382">
        <div class="comment_item" id="comment_1096496" >

    <span class="parent_id" data-parent_id="1096382"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096496">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096496" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 5 ноября 2008 в 15:17</time>

            <a href="#comment_1096496" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096496" data-parent_id="1096382" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096382" data-id="1096496" data-parent_id="1096382" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            а индексы ;)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096496">
        <div class="comment_item" id="comment_1097213" >

    <span class="parent_id" data-parent_id="1096496"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097213">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097213" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/BAHO/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/769/c89/f59/769c89f59ba36e83de675ccfd10358f4_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/BAHO/" class="username">BAHO</a>
            <time> 5 ноября 2008 в 20:47</time>

            <a href="#comment_1097213" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097213" data-parent_id="1096496" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096496" data-id="1097213" data-parent_id="1096496" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            А что не так с индексами? Я и правда что-то упустил?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097213">
    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096567" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096567">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096567" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/uj2/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/uj2/" class="username">uj2</a>
            <time> 5 ноября 2008 в 15:45</time>

            <a href="#comment_1096567" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Небольшие поправки. Вот это:<br/>
<br/>
<pre>
SELECT rownum as rn FROM dual
 CONNECT BY level &lt;= (SELECT max(id) FROM test_table);
</pre><br/>
<br/>
Работает только в 10g, в версиях ниже выдается ORA-01473: cannot have subqueries in CONNECT BY clause.<br/>
<br/>
А вот такое, почему-то, в 9-ке выдает всего одну строку вместо 10 (почему — не знаю):<br/>
<br/>
<pre>
SELECT 1, level FROM dual
 CONNECT BY rownum &lt;=10
</pre><br/>
<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096567">
        <div class="comment_item" id="comment_1096584" >

    <span class="parent_id" data-parent_id="1096567"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1096584">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096584" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 15:56</time>

            <a href="#comment_1096584" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096584" data-parent_id="1096567" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096567" data-id="1096584" data-parent_id="1096567" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Хм, интересно. У меня как раз 10g и оба запроса работают как надо. Если найду решение для 9-ки, дам знать.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096584">
        <div class="comment_item" id="comment_1096630" >

    <span class="parent_id" data-parent_id="1096584"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096630">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096630" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/uj2/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/uj2/" class="username">uj2</a>
            <time> 5 ноября 2008 в 16:13</time>

            <a href="#comment_1096630" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096630" data-parent_id="1096584" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096584" data-id="1096630" data-parent_id="1096584" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Вот здесь: <a href="http://www.sqlsnippets.com/en/topic-11821.html">www.sqlsnippets.com/en/topic-11821.html</a> в разделе «Gotchas» и подразделе «Issues» как-то мутно объясняют, что, де, это из-за того, что CONNECT BY <strong>обязан</strong> содержать PRIOR, и приводят рабочий вариант для девятки:<br/>
<br/>
<pre>
select *
from   (select level from dual connect by level &lt; 10) ;
</pre><br/>
<br/>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096630">
        <div class="comment_item" id="comment_1096725" >

    <span class="parent_id" data-parent_id="1096630"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1096725">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096725" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 16:49</time>

            <a href="#comment_1096725" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1096725" data-parent_id="1096630" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096630" data-id="1096725" data-parent_id="1096630" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Да, именно так. На <a href="http://www.sql.ru/forum/actualthread.aspx?tid=534659">sql.ru</a> обсуждалась такая бага 9-ки.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096725">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1096591" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="author_banned">НЛО прилетело и опубликовало эту надпись здесь</div>
    </div>

    <div class="reply_comments" id="reply_comments_1096591">
    </div>
</div>

            <div class="comment_item" id="comment_1096724" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096724">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096724" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/ZakharS/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/2d7/d15/319/2d7d15319fa9118a6136dc48e38d9663_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/ZakharS/" class="username">ZakharS</a>
            <time> 5 ноября 2008 в 16:49</time>

            <a href="#comment_1096724" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Спасибо большое за статью! Честно говоря, раньше не слышал об иерархии в базах. Думаю, что не я один :)<br/>
Если бы делал показ дерева на сайте, поступил бы так же, как Вы описали — загрузка верхнего уровня, затем подзапрос по клику на узел.<br/>
Добавляю статью в избранное.<br/>
P.S. Исправьте, пожалуйста «ни раз» -&gt; «не раз».
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096724">
    </div>
</div>

            <div class="comment_item" id="comment_1096931" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096931">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096931" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/WebByte/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/abe/569/001/abe5690011dda67dbc95a4dbcd654e31_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/WebByte/" class="username">WebByte</a>
            <time> 5 ноября 2008 в 18:34</time>

            <a href="#comment_1096931" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            И всё бы хорошо, да только полный граф этими запросами в Оракле не получишь. 
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096931">
    </div>
</div>

            <div class="comment_item" id="comment_1096970" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1096970">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1096970" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 3: &uarr;3 и &darr;0">+3</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/vdshat/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/vdshat/" class="username">vdshat</a>
            <time> 5 ноября 2008 в 18:48</time>

            <a href="#comment_1096970" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Народ, честно, не могу понять практического применения описанных запросов, с точки зрения конечного продукта, а не академических или консольных задач. Сколько работал с иерархическими данными нигде на уровне базы и SQL-запросов не нужно было выбирать все дерево, а если и нужно было, то обычного selectа и orderа хватало. А задачи были от навороченных отчетов, до достроения OLAP-системы на реляционной Sybase 9 в банке. Может приведет кто-то конкретный пример применения?
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1096970">
        <div class="comment_item" id="comment_1097471" >

    <span class="parent_id" data-parent_id="1096970"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1097471">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097471" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: &uarr;1 и &darr;1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 5 ноября 2008 в 23:11</time>

            <a href="#comment_1097471" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097471" data-parent_id="1096970" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1096970" data-id="1097471" data-parent_id="1096970" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Что-то никто не спешит отвечать, буду сам отдуваться. Я никогда не слышал о крупных проектах, использющих иерархические данные способом, описанным в статье. Возможно такие есть, но, скорее всего, нет. Применимость иерархических запросов можно выделить в большую группу мелких и средних проектов. <br/>
Для них это приемлемо потому что:<br/>
1. Структура данных становится простой и понятной.<br/>
2. Код не загроможден лишними функциями обработки строк для построения дерева средствами внешнего для SQL языка.<br/>
3. Гораздо быстрее написать несколько команд иерархического запроса, чем городить огород.<br/>
4. Используются стандартные методы. Программисту, который будет заниматься поддержкой и развитием, будет проще разобраться.<br/>
А минус всего один: относительно низкая производительность.<br/>
Пока плюсы перекрывают минус, почему бы не использовать. Я лично применял несколько раз, когда требовалось отобразить дерево.<br/>
<br/>
Или товарищей чисто от самого факта «более низкая производительность» коробит? Так давайте все на си писать, никаких php, ruby и т.д. — они же медленнее.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097471">
        <div class="comment_item" id="comment_1097789" >

    <span class="parent_id" data-parent_id="1097471"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097789">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097789" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/ItGold/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/ItGold/" class="username">ItGold</a>
            <time> 6 ноября 2008 в 01:31</time>

            <a href="#comment_1097789" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1097789" data-parent_id="1097471" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097471" data-id="1097789" data-parent_id="1097471" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            ничего себе, промазал как-то комментом…<br/>
см. ниже :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097789">
    </div>
</div>

        <div class="comment_item" id="comment_1098275" >

    <span class="parent_id" data-parent_id="1097471"></span>
    <div class="comment_body ">
        <div class="info  " rel="1098275">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098275" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 1: &uarr;0 и &darr;1">–1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 6 ноября 2008 в 10:52</time>

            <a href="#comment_1098275" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098275" data-parent_id="1097471" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097471" data-id="1098275" data-parent_id="1097471" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad1">
            Данным способом существуют только масса мелких проектов…<br/>
Для больших и сильнонагруженных используются в основном другие алгоритмы.<br/>
<br/>
Я вообще не понимаю. Очень многие разработчики используют БД как хранилище данных и полностью забывают про архитектуру.<br/>
<br/>
Для тех, кто использует БД как хранилище данных и предназначена рекурсия… это как отмычка. Для всех замков: долго — но может откроет… В коммерческих проектах — так делать нельзя. Надо подходить сначала к БД -как к архитектуре.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098275">
        <div class="comment_item" id="comment_1099515" >

    <span class="parent_id" data-parent_id="1098275"></span>
    <div class="comment_body ">
        <div class="info  " rel="1099515">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1099515" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/85e/4f4/13b/85e4f413b4d83b31654870ea96a91e8c_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/merlin-vrn/" class="username">merlin-vrn</a>
            <time> 6 ноября 2008 в 16:12</time>

            <a href="#comment_1099515" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1099515" data-parent_id="1098275" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1098275" data-id="1099515" data-parent_id="1098275" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            В коммерческих проеках оценивается не производительность сама по себе, или качество кода само по себе, а стоимость решения. Если мне дешевле написать рекурсивный запрос и купить в два раза больше ОЗУ и процессоров, я так и сделаю.<br/>
<br/>
Процессоры дешевле программистов.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1099515">
        <div class="comment_item" id="comment_1099906" >

    <span class="parent_id" data-parent_id="1099515"></span>
    <div class="comment_body ">
        <div class="info  " rel="1099906">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1099906" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 6 ноября 2008 в 18:03</time>

            <a href="#comment_1099906" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1099906" data-parent_id="1099515" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1099515" data-id="1099906" data-parent_id="1099515" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Нахватались умных слов? :)<br/>
Распараллельте потом на серверы «рекурсию»…<br/>
Я на вас посмотрю…<br/>
А грамтоная архитектура БД + «не рекурсия» — свободно… вы сами противоречите себе…<br/>
Слышал звон — не заню где он
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1099906">
    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_1098897" >

    <span class="parent_id" data-parent_id="1097471"></span>
    <div class="comment_body ">
        <div class="info  " rel="1098897">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098897" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/vdshat/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/vdshat/" class="username">vdshat</a>
            <time> 6 ноября 2008 в 13:45</time>

            <a href="#comment_1098897" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098897" data-parent_id="1097471" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097471" data-id="1098897" data-parent_id="1097471" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Спасибо за ответ. Позвольте прокомментировать Ваши ответы.<br/>
<br/>
1. Структура данных от запроса не зависит.<br/>
2. Согласен<br/>
3. Если для консоли, то да, а если на туже HTML-страницу вывести со всеми стилями и прочим? Ведь весь огород городится для презентационности представления.<br/>
4. Спорный вопрос, я бы не сказал, что подобные запросы настолько изящны, что в них легко разбираться.<br/>
<br/>
А вот вопрос производитеьности к получению данных имеет самое прямое отношение. Честно говоря, жалко людей, у которых на генерацию всяких отчетов уходит очень много времени.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098897">
        <div class="comment_item" id="comment_1099391" >

    <span class="parent_id" data-parent_id="1098897"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1099391">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1099391" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 6 ноября 2008 в 15:50</time>

            <a href="#comment_1099391" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1099391" data-parent_id="1098897" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1098897" data-id="1099391" data-parent_id="1098897" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Тогда и прокомментирую.<br/>
<br/>
1. Это скорее относилось к структуре данных по отношению к методу NS: нумерация строк и ссылки на родителей гораздо понятнее левых и правых сторон.<br/>
3. При выводе на веб-страницу, достаточно обворачивать каждую строку (вернее поля строки) в HTML-теги в порядке поступления строк без всякой дополнительной обработки.<br/>
4. Дело вкуса, не буду спорить.<br/>
<br/>
Я не думаю что отчет должен содержать миллионы строк. Зачем это человеку? А выборка из сотни-другой строк происходит настолько быстро, что человек не в состоянии заметить разницы, какой вид запроса применял программист.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1099391">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1097787" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097787">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097787" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/ItGold/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/ItGold/" class="username">ItGold</a>
            <time> 6 ноября 2008 в 01:30</time>

            <a href="#comment_1097787" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Разрешите контр-аргументы.<br/>
1) Для простых и понятных структур данных статьи пишут совсем другого характера.<br/>
2) Язык SQL не предназначен для решения подобного рода задач, поэтому решение получается чрезвычайно кривым и сильно зависимым от конкретного производителя RDBMS. Согласен, что функции построения дерева нужно инкапсулировать в какой-то изолированый модуль, но при грамотной архитектуре, это не большая проблема.<br/>
3) Гораздо быстрее реализовать и затем легче поддерживать древовидные структуры с помощью паттерна Composite на уровне более развитого языка программирования, и не городить огород.<br/>
4) Используются не стандартные методы, как уже упомянулось в п. 2. Рабозбраться с этой хренотенью будет реально тяжело. Программист должен быть experienced в конкретной базе данных.<br/>
<br/>
Про performance и scalability говорить не будем.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097787">
        <div class="comment_item" id="comment_1098095" >

    <span class="parent_id" data-parent_id="1097787"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1098095">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098095" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time> 6 ноября 2008 в 09:47</time>

            <a href="#comment_1098095" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098095" data-parent_id="1097787" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097787" data-id="1098095" data-parent_id="1097787" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Зерно истины есть в ваших словах. Не буду спорить. Мне вот только непонятно, что это за гипотетический программист такой, котороый может разобраться с Composite или другим модулем для построения дерева, но при этом не в состоянии осилить несколько команд sql-запроса. И еще по поводу пункта 4: очень желательно чтобы программист был осведомлен о возможностях СУБД, с которой он работает. Потому что в каждой есть свои нюансы. В одной надо делать так, в другой иначе, в третьей можно и так, и эдак. Нельзя весь функционал базы данных сводить к кроссплатформенному SELECT * FROM…, и потом дообробатывать внешними средствами.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098095">
    </div>
</div>

        <div class="comment_item" id="comment_1098279" >

    <span class="parent_id" data-parent_id="1097787"></span>
    <div class="comment_body ">
        <div class="info  " rel="1098279">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1098279" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maxic/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/maxic/" class="username">maxic</a>
            <time> 6 ноября 2008 в 10:53</time>

            <a href="#comment_1098279" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1098279" data-parent_id="1097787" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1097787" data-id="1098279" data-parent_id="1097787" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            sql хоть и не прдназначен для иерархических данных, но при грамотном подходе научить можно.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1098279">
        <div class="comment_item" id="comment_1234178" >

    <span class="parent_id" data-parent_id="1098279"></span>
    <div class="comment_body ">
        <div class="info  " rel="1234178">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1234178" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/vosi/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/df2/f72/e89/df2f72e893fa8fb886eac99e3d36e20e_small.png" alt="" /></a>
            <a href="http://habrahabr.ru/users/vosi/" class="username">vosi</a>
            <time>27 декабря 2008 в 20:27</time>

            <a href="#comment_1234178" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1234178" data-parent_id="1098279" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1098279" data-id="1234178" data-parent_id="1098279" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            у Вас пластинка заела?<br/>
расскажите же, наконец, о своем мега-методе!
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1234178">
    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1097947" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1097947">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1097947" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Yak52/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/Yak52/" class="username">Yak52</a>
            <time> 6 ноября 2008 в 06:45</time>

            <a href="#comment_1097947" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Добавлю в копилку автора, запрос на выборку всех потомков для заданного родителя, для СУБД MaxDB.<br/>
<br/>
declare c cursor for with recursive tree (node_id, node_pid, node_level) as <br/>
( select id, pid, 0 <br/>
from test_table where Условие_выборки_родительского_элемента<br/>
union all<br/>
select id, pid, node_level+1<br/>
from test_table, tree <br/>
where tree.node_id = test_table.pid<br/>
)<br/>
select node_id<br/>
from tree <br/>
order by node_level
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1097947">
    </div>
</div>

            <div class="comment_item" id="comment_1100710" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1100710">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1100710" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/LimeOrange/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/302/36a/601/30236a6014cc2b0636722442479316ba_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/LimeOrange/" class="username">LimeOrange</a>
            <time> 6 ноября 2008 в 23:22</time>

            <a href="#comment_1100710" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Мои 5 копеек по поводу репрессий в отношении рекурсий: ну ёлки-палки, ну кто ж будет такой глупый, чтобы реально делать рекурсивный запрос каждый раз? Собрал один раз структуру в хэш (массив), сериализовал (если надо), сунул в кеш, да перестраиваешь время от времени, когда структура в базе изменяется. При чем не обязательно перестраивать всю структуру целиком, достаточно просто участками, т.к. перестраивать довольно часто надо отнюдь не всё, только определенные ветки.<br/>
Даже с учетом ресурсоёмкости процесса перестраивания кеша (что происходит, наверное, не часто) всё это всёравно выглядит лучше, чем materialized path, да и ведет себя не так «забавно» как NS.<br/>
Как-то так.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1100710">
        <div class="comment_item" id="comment_1105649" >

    <span class="parent_id" data-parent_id="1100710"></span>
    <div class="comment_body ">
        <div class="author_banned">НЛО прилетело и опубликовало эту надпись здесь</div>
    </div>

    <div class="reply_comments" id="reply_comments_1105649">
    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_1613113" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="1613113">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1613113" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/multik/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/88f/57f/dc5/88f57fdc58575846f67292595f8bf298_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/multik/" class="username">multik</a>
            <time>13 мая 2009 в 11:29</time>

            <a href="#comment_1613113" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Вот что значит использовать для отображения дерева таблицы.<br/>
В Cache всё было бы значительно проще:<br/>
<br/>
пусть данные хранятся в глобале ^Tree<br/>
<br/>
Распечатаем глобал и посмотри что внутри:<br/>
<strong>zw ^Tree</strong><br/>
<br/>
^Tree(«Россия»)=1<br/>
^Tree(«Россия»,«Воронеж»)=2<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;)=3<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;,«Главный офис»)=6<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;,«Офис 1»)=7<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;,«Офис 2»)=8<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;,«Офис 2»,«Сервер 1»)=9<br/>
^Tree(«Россия»,«Лиски»)=5<br/>
^Tree(«Россия»,«Лиски»,«ЛискиПресс»)=10<br/>
^Tree(«Россия»,«Москва»)=4<br/>
<br/>
Уже это дерево легко преобразовать в xml и отобразить в интерфейсе.<br/>
<br/>
Предположим что этого не достаточно и нам необходимо самим рекурсивно оббегать структуру — будем использовать низкоуровневую функцию $query ($q)<br/>
<br/>
результатом выполнения комманды:<br/>
<strong>s l=&quot;^Tree&quot; f { s l=$q(@l) q:l=&quot;&quot; s len=$ql(l) w l,! }</strong><br/>
<br/>
будет:<br/>
^Tree(«Россия»)<br/>
^Tree(«Россия»,«Воронеж»)<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;)<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;,«Главный офис»)<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;,«Офис 1»)<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;,«Офис 2»)<br/>
^Tree(«Россия»,«Воронеж»,«ООО „“Рога и копыта»&quot;&quot;,«Офис 2»,«Сервер 1»)<br/>
^Tree(«Россия»,«Лиски»)<br/>
^Tree(«Россия»,«Лиски»,«ЛискиПресс»)<br/>
^Tree(«Россия»,«Москва»)<br/>
<br/>
Добавим отступы (пусть никого не пугает вложенный цикл <br/>
<strong>f i=1:1:len {w &quot; &quot;}</strong> ) и идентефикаторы выполним комманду:<br/>
<br/>
<strong>s l=&quot;^Tree&quot; f { s l=$q(@l) q:l=&quot;&quot; s len=$ql(l) f i=1:1:len {w &quot; &quot;} w &quot;(&quot;,$g(@l),&quot;) &quot;,$qs(l,len),! }</strong><br/>
<br/>
получим:<br/>
<pre>
 (1) Россия
  (2) Воронеж
   (3) ООО &quot;Рога и копыта&quot;
    (6) Главный офис
    (7) Офис 1
    (8) Офис 2
     (9) Сервер 1
  (5) Лиски
   (10) ЛискиПресс
  (4) Москва
</pre><br/>
<br/>
Всё. Никаких хитростей никаких наворотов стандартные низкоуровневые функции. Стандартное дерево, в котором и хранятся все данные. Даже индексы не задействованы.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1613113">
        <div class="comment_item" id="comment_1613129" >

    <span class="parent_id" data-parent_id="1613113"></span>
    <div class="comment_body ">
        <div class="info  " rel="1613129">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1613129" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/multik/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/88f/57f/dc5/88f57fdc58575846f67292595f8bf298_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/multik/" class="username">multik</a>
            <time>13 мая 2009 в 11:35</time>

            <a href="#comment_1613129" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1613129" data-parent_id="1613113" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1613113" data-id="1613129" data-parent_id="1613113" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            про скорость обработки таких деревьев я скромно умолчу — время рекурсивной обработки зависит от размера дерева логарифмически. То есть вывод по скорости дерева с миллионом узлов аналогичен select * From table (предположим что имеем там миллион записей). Насчёт сортировки тоже заморачиваться не стоит. <br/>
<br/>
И вообще преобразовать табличные данные в деревянные — легко, обратная процедура не всегда возможна и очень ресурсоёмка (имеется ввиду на уровне БД а не интрефейса).
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1613129">
    </div>
</div>

        <div class="comment_item" id="comment_1613529" >

    <span class="parent_id" data-parent_id="1613113"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1613529">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1613529" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time>13 мая 2009 в 13:37</time>

            <a href="#comment_1613529" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1613529" data-parent_id="1613113" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1613113" data-id="1613529" data-parent_id="1613113" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Строчка запроса взрывает мне мозг, уж больно синтаксис непривычный. Но выглядит очень впечатляюще. В Oracle, как ни крути, деревья всего лишь дополнительная фича, а не главная составляющая.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1613529">
        <div class="comment_item" id="comment_1613707" >

    <span class="parent_id" data-parent_id="1613529"></span>
    <div class="comment_body ">
        <div class="info  " rel="1613707">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1613707" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: &uarr;1 и &darr;0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/multik/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/88f/57f/dc5/88f57fdc58575846f67292595f8bf298_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/multik/" class="username">multik</a>
            <time>13 мая 2009 в 14:28</time>

            <a href="#comment_1613707" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1613707" data-parent_id="1613529" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1613529" data-id="1613707" data-parent_id="1613529" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            тогда распишу сокращения понятнее будет<br/>
<pre>
set l=&quot;^Tree&quot; //устанавливаем значение переменной

for { //цикл
 set l=$query(@l) //берём следующий по очереди элемент дерева (алгоритм  обхода функции $query сверху вниз затем справа налево)

 quit:l=&quot;&quot; //выходим из цикла когда всё обошли
 set len=$querylength(l) //определяем глубину вложенности (вниз) текущего узла

 for i=1:1:len {write &quot; &quot;} //печатаем отступы 

 write &quot;(&quot;,$get(@l),&quot;) &quot;,$querysubs&#99;ript(l,len),! //печатем в скобках значение узла + его имя 
}
</pre><br/>
сокращённый вариант <br/>
<pre>
s l=&quot;^Tree&quot; f { s l=$q(@l) q:l=&quot;&quot; s len=$ql(l) f i=1:1:len {w &quot; &quot;} w &quot;(&quot;,$g(@l),&quot;)&quot;,$qs(l,len),! }
</pre>
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1613707">
        <div class="comment_item" id="comment_1613729" >

    <span class="parent_id" data-parent_id="1613707"></span>
    <div class="comment_body ">
        <div class="info  " rel="1613729">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1613729" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/multik/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/88f/57f/dc5/88f57fdc58575846f67292595f8bf298_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/multik/" class="username">multik</a>
            <time>13 мая 2009 в 14:34</time>

            <a href="#comment_1613729" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1613729" data-parent_id="1613707" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1613707" data-id="1613729" data-parent_id="1613707" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            ошибка сверху — вниз затем слева — направо
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1613729">
    </div>
</div>

        <div class="comment_item" id="comment_1613931" >

    <span class="parent_id" data-parent_id="1613707"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="1613931">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1613931" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/maovrn/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/1db/1fd/91e/1db1fd91efbb6d8323cc04e74275bf26_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/maovrn/" class="username">maovrn</a>
            <time>13 мая 2009 в 15:31</time>

            <a href="#comment_1613931" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1613931" data-parent_id="1613707" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1613707" data-id="1613931" data-parent_id="1613707" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Так значительно понятнее! Спасибо. Вполне себе алгоритмический язык. Пожалуй, такой запрос написать даже проще, чем в Oracle.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1613931">
        <div class="comment_item" id="comment_1617315" >

    <span class="parent_id" data-parent_id="1613931"></span>
    <div class="comment_body ">
        <div class="info  " rel="1617315">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_1617315" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/bazil/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
            <a href="http://habrahabr.ru/users/bazil/" class="username">bazil</a>
            <time>14 мая 2009 в 16:05</time>

            <a href="#comment_1617315" class="link_to_comment">#</a>
            
                <div class="show_tree" data-id="1617315" data-parent_id="1613931" title="Показать ветку комментариев">&#8629;</div>
                <a href="#comment_1613931" data-id="1617315" data-parent_id="1613931" class="to_parent">&uarr;</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            это не «запрос» — это язык mumps. Прелесть Cache в том, что они соединили язык программирования и данные, с которыми он работает, в одной посудине. Так что этот код — аналог php+sql, где вместо запросов к базе юзаются $f() функции.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_1617315">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_8179777" >

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8179777">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8179777" class="voting   ">
                <span class="minus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <span class="plus" title="Голосовать могут только зарегистрированные пользователи"></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/dimka310/" class="avatar"><img src="//habrastorage.org/getpro/habr/avatars/b59/031/54b/b5903154bed228a0d057f00ccd6e6dbe_small.jpg" alt="" /></a>
            <a href="http://habrahabr.ru/users/dimka310/" class="username">dimka310</a>
            <time>14 декабря 2014 в 19:40</time>

            <a href="#comment_8179777" class="link_to_comment">#</a>
            
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Спасибо Вам большое за познавательную статью! Думаю, что многим из Хабрасообщества эта статья будет реально полезна. Также понравилась форма преподнесения: просто о сложном, подробно, интересно. Говорю, как человек, только изучающий язык запросов.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8179777">
    </div>
</div>

    </div>


  					<p class="for_users_only_msg">Только зарегистрированные пользователи могут оставлять комментарии. <a href="https://habrahabr.ru/auth/login/">Войдите</a>, пожалуйста.</p>



    <div class="block_after_post">
      

  <div class="live_broadcast">
    <h2 class="title">Что обсуждают?</h2>
    <div class="posts_list">
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/260919#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">Результаты раздачи плат. Апгрейд акции добра</a>&nbsp;<span class="count">(13)</span>
          </div>
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/254513#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">Самоделки своими руками на микроконтроллере</a>&nbsp;<span class="count">(18)</span>
          </div>
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/261075#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">Антивирусы под прицелом: большая дыра в ESET и атака на Касперского</a>&nbsp;<span class="count">(22)</span>
          </div>
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/261113#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">K-Meleon 75: дошли до финала</a>&nbsp;<span class="count">(6)</span>
          </div>
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/261067#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">Публичное бета-тестирование FlyElephant для научных расчетов</a>&nbsp;<span class="count">(14)</span>
          </div>
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/257227#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">Удаленная работа или фриланс в глубинке. Аспекты связи. Часть 1</a>&nbsp;<span class="count">(41)</span>
          </div>
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/261099#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">Детектор эллипсов в реальном времени</a>&nbsp;<span class="count">(16)</span>
          </div>
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/261077#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">5 стажировок для IT-специалистов за рубежом</a>&nbsp;<span class="count">(3)</span>
          </div>
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/261085#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">Программное обеспечение Samsung способно намеренно отключать Windows Update</a>&nbsp;<span class="count">(20)</span>
          </div>
          <div class="post_item">
            <span class="bull"></span>
            <a href="/post/261111#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'live_broadcast_activity', 'post'); }" class="post_name">Простой алгоритм для поиска всех совпадающих под-текстов в двух текстах</a>&nbsp;<span class="count">(13)</span>
          </div>
    </div>
  </div>

    </div>

  	
<form action="/json/favorites/" method="post" id="edit_tags_form" class="hidden">
  <input type="hidden" name="action" value="add" />
  <input type="hidden" name="ti" value="0" />
  <input type="hidden" name="tt" value="0" />
  <label>Пометьте топик понятными вам метками, если хотите</label>
  <input type="text" name="tags_string" class="tags_string" />
  <div class="description">Метки лучше разделять запятой. Например: <i>общение, социальные сети, myspace.com, подростки, мердок</i></div>
  <input type="submit" value="Сохранить" class="submit" /> или <a href="#" class="close" onclick="return close_edit_tags()">закрыть</a>
</form>



  </div>
  <div class="sidebar_right">
  			<div class="banner_300x500">
		<div id="adriver_banner_1863387959"></div>
		<script type="text/javascript">
            function show_bn1_block(name, url){
                console.log('show' + name);
                if( typeof(name) !== 'undefined'){
                    $.get('/html/'+name+'/1435178010/', function(html){
                        $('#adriver_banner_1863387959').html(html);
                        if( typeof(url) !== 'undefined'){
                            $('.'+name+'_inner_banner .block_url').attr('href', url);
                        }
                    })
                }
            }



			$(function(){

                // конвертирут кириллицу в cp1251
                // doc: http://www.adriver.ru/doc/edu-n/pub/settargt/standtrgt/scentrgt/scentrgt.html#9
				function esc(s){
                    for(var i=0,l=s.length,r='';i<l;i++){
                        var c = s.charCodeAt(i);r += String.fromCharCode(c>1039&&c<1104 ? c-848 : c==1105 ? 184 : c==1025 ? 168 : c);
                    }
                    return r;
                }

                var keyword = '';

                if (typeof crtg_content !== 'undefined' && crtg_content) { keyword = crtg_content; }
                
                

				var custom = {4:ar_duo1};
					custom[1] = 'sql';

                 new adriver("adriver_banner_1863387959", {sid: 176776, bt: 52, bn: 1, custom: custom, keyword: keyword});
			}());



            
		</script>
	</div>

  		
  		
<div class="block daily_best_posts">


        <div class="title hide_on_float">Публикация дня <img src="/i/bg_cicle_help.png" title="Автор, чья публикация набрала максимальное количество баллов<br>среди всех публикаций за прошедшие сутки, получает подписку <br>от Bookmate. Учитываются публикации, для которых истек срок <br>голосования (3 дня с момента публикации)." class="help-tip"></div>
        <div class="posts_list hide_on_float">
            <div class="post_item" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'click_to_best_post', 'http://habrahabr.ru/post/260749/ Создание самодельных аксессуаров для Dendy'); }">
                <a href="http://habrahabr.ru/post/260749/" class="post_name">Создание самодельных аксессуаров для Dendy</a>&nbsp;<a href="http://habrahabr.ru/post/260749/#comments" class="count">31</a>
            </div>
        </div>
        <div class="supported_by_bookmate hide_on_float">
            При поддержке <a target="_blank" href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=528353&bt=21&pid=2032277&bid=3901375&bn=3901375&rnd=30581414"><img src="/images/sidebar/bookmate_logo.png" alt="Bookmate" /></a>
            <script src="http://ad.adriver.ru/cgi-bin/rle.cgi?sid=1&ad=528353&bt=21&pid=2032277&bid=3901687&bn=3901687&rnd=523664290"></script>
        </div>


  <div class="title">Популярное за сутки</div>
  <div class="posts_list">
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/metrotek/blog/261003/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Механизмы профилирования Linux</a>&nbsp;<a href="http://habrahabr.ru/company/metrotek/blog/261003/#comments" class="count">6</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/infopulse/blog/260809/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Использование монад в С++. Часть 1: монада списка</a>&nbsp;<a href="http://habrahabr.ru/company/infopulse/blog/260809/#comments" class="count">14</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/261055/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Когда всё дело в количестве. Нелинейная арифметика больших партий электронных устройств</a>&nbsp;<a href="http://habrahabr.ru/post/261055/#comments" class="count">37</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/pt/blog/261075/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Антивирусы под прицелом: большая дыра в ESET и атака на Касперского</a>&nbsp;<a href="http://habrahabr.ru/company/pt/blog/261075/#comments" class="count">22</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/261085/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Программное обеспечение Samsung способно намеренно отключать Windows Update</a>&nbsp;<a href="http://habrahabr.ru/post/261085/#comments" class="count">20</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/pt/blog/261035/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Конкурс MiTM Mobile: как ломали мобильную связь на PHDays V</a>&nbsp;<a href="http://habrahabr.ru/company/pt/blog/261035/#comments" class="count">10</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/metrotek/blog/260979/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">НТЦ Метротек: как это было. Часть первая (2004-2006)</a>&nbsp;<a href="http://habrahabr.ru/company/metrotek/blog/260979/#comments" class="count">4</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/plarium/blog/260969/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Дайджест новостей из мира разработки на Unity</a>&nbsp;
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/pentestit/blog/260913/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">PentestBox — портативная сборка популярных security утилит</a>&nbsp;<a href="http://habrahabr.ru/company/pentestit/blog/260913/#comments" class="count">11</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/dataart/blog/261087/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">DevOps tools от Microsoft</a>&nbsp;<a href="http://habrahabr.ru/company/dataart/blog/261087/#comments" class="count">3</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/nixsolutions/blog/261031/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Реактивные расширения</a>&nbsp;<a href="http://habrahabr.ru/company/nixsolutions/blog/261031/#comments" class="count">6</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/261049/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Релиз CrystaX NDK 10.2</a>&nbsp;
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/infopulse/blog/261061/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Тестирование на основе диаграмм состояний сущности</a>&nbsp;<a href="http://habrahabr.ru/company/infopulse/blog/261061/#comments" class="count">1</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/261111/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Простой алгоритм для поиска всех совпадающих под-текстов в двух текстах</a>&nbsp;<a href="http://habrahabr.ru/post/261111/#comments" class="count">13</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/261099/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Детектор эллипсов в реальном времени</a>&nbsp;<a href="http://habrahabr.ru/post/261099/#comments" class="count">16</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/intel/blog/260565/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">T.E.E.T.H. на основе Intel Edison найдёт способ замотивировать вас почистить зубы и отправит отчет в облако</a>&nbsp;<a href="http://habrahabr.ru/company/intel/blog/260565/#comments" class="count">19</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/studyqa/blog/261077/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">5 стажировок для IT-специалистов за рубежом</a>&nbsp;<a href="http://habrahabr.ru/company/studyqa/blog/261077/#comments" class="count">3</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/flyelephant/blog/261067/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Публичное бета-тестирование FlyElephant для научных расчетов</a>&nbsp;<a href="http://habrahabr.ru/company/flyelephant/blog/261067/#comments" class="count">14</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/vps-menu/blog/261047/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Обновленный функционал на VDS.menu</a>&nbsp;<a href="http://habrahabr.ru/company/vps-menu/blog/261047/#comments" class="count">11</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/Voximplant/blog/261037/"
           onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'daily_best_posts', $(this).parents('.daily_best_posts').hasClass('float_block') ? 'float' : 'common'); }"
           class="post_name">Делаем видео-конференции в браузере за 10 минут</a>&nbsp;<a href="http://habrahabr.ru/company/Voximplant/blog/261037/#comments" class="count">14</a>
      </div>
  </div>
  <div class="all"><a href="/top/">все лучшие</a></div>
</div>

	    

<div class="block geektimes_top">
	<a href="http://geektimes.ru" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" class="title">Лучшее на Geektimes</a>
	<div class="posts_list">
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/252482/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Ошибки «Гравитации»</a>&nbsp;<a href="http://geektimes.ru/post/252482/#comments" class="count">85</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/252470/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">LampTest.ru — тестирование светодиодных ламп</a>&nbsp;<a href="http://geektimes.ru/post/252470/#comments" class="count">86</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/250992/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Что происходит с РУнетом по состоянию на июнь</a>&nbsp;<a href="http://geektimes.ru/post/250992/#comments" class="count">16</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/252480/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Назад в будущее: Lexus показал работающий Ховерборд</a>&nbsp;<a href="http://geektimes.ru/post/252480/#comments" class="count">23</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/252472/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Cassini сфотографировал три спутника Сатурна одновременно</a>&nbsp;<a href="http://geektimes.ru/post/252472/#comments" class="count">7</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/252452/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Olympus E-PL7: учитесь, как надо делать бюджетники | Часть 1</a>&nbsp;<a href="http://geektimes.ru/post/252452/#comments" class="count">10</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/252512/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Презервативы смогут менять цвет в зависимости от того, с какой венерической инфекцией они контактируют</a>&nbsp;<a href="http://geektimes.ru/post/252512/#comments" class="count">24</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/252466/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Генпрокуратура РФ проверит Google Play и Apple iTunes. Ищут экстремистские материалы</a>&nbsp;<a href="http://geektimes.ru/post/252466/#comments" class="count">10</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/252476/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Flash Crash 2010: главный подозреваемый в деле на триллион долларов</a>&nbsp;<a href="http://geektimes.ru/post/252476/#comments" class="count">19</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/252474/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">IBM Watson теперь готовит для всех</a>&nbsp;<a href="http://geektimes.ru/post/252474/#comments" class="count">1</a>
  		</div>
	</div>
	<div class="all"><a href="http://geektimes.ru/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">все публикации</a></div>
</div>

	  	

<div class="block geektimes_top">
    <a href="http://megamozg.ru" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" class="title">Лучшее на Мегамозге</a>
    <div class="posts_list">
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16778/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Иллюзорность стартапов</a>&nbsp;<a href="http://megamozg.ru/post/16778/#comments" class="count">5</a>
        </div>
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16772/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Российский онлайн-ретейлер «Юлмарт» может стать агрегатором для других интернет-магазинов</a>&nbsp;
        </div>
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16760/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Как интернет убил воронку продаж</a>&nbsp;
        </div>
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16768/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Несмотря на обвинения в нарушении акционерного соглашения, совладельцы Biglion запустили конкурирующий сервис</a>&nbsp;
        </div>
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16766/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Компанию Dollar Shave Club оценили в $615 млн</a>&nbsp;
        </div>
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16774/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">«Брошенные корзины» и «брошенная оплата» в чем разница и из-за чего теряется прибыль? (инфографика)</a>&nbsp;<a href="http://megamozg.ru/post/16774/#comments" class="count">5</a>
        </div>
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16794/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Проблемы распределённых команд и способы их решения</a>&nbsp;<a href="http://megamozg.ru/post/16794/#comments" class="count">1</a>
        </div>
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16780/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Визуализируй это, или планирование Agile проектов с помощью диаграммы Ганта</a>&nbsp;<a href="http://megamozg.ru/post/16780/#comments" class="count">2</a>
        </div>
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16776/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Минэкономразвития разработает единые требования к электронным торговым площадкам и сократит их количество</a>&nbsp;
        </div>
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/16782/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Alibaba Group продает свой единственный интернет-магазин в США</a>&nbsp;
        </div>

    </div>
    <div class="all"><a href="http://megamozg.ru/" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">все публикации</a></div>
</div>


  	  
<div class="block similar_questions">
	<div class="title">Вопросы по теме</div>

	<div class="posts_list">
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/227160">Как перетасовать вопросы для каждого студента (но не order by rand)?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/227158">Как лучше спроектировать базу для сайта знакомств?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/227154">Не заполняет базу данных в mysql?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/227113">MySQL LONGBLOB обрезается?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/227089">Как сохранить результаты cookies в БД?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/227031">Как проводить математические операции с данными в MySql?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/227007">Как слить несколько таблиц в одну?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/227004">Как вывести конкретное значение...?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226993">Как исправить ошибку в phpmyadmin?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226976">Что именно нужно знать по SQL когда работаешь с фреймворком?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226954">Можно ли использовать SQLite для средних проектов вместо mysql?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226933">Хранить данные в бд или делать расчеты каждый раз?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226930">Много много разного html - отдельные файлы или БД?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226897">Почему не работает сортировка по полю?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226863">Какую сделать структуру таблицы в MySQL, чтоб менять позицию записи с минимальным усилием сервера?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226792">Как сделать бд в чате (socket.io)?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226777">Как убрать артефакт в виде двух плюсов?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226765">Настройка grant в mysql?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226742">Система добавления баннеров в сайт, как написать самому?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name"  data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" href="http://toster.ru/q/226734">Как выполнить миграцию с MS SQL Server на MySQL?</a>
		</div>
  </div>

</div>


  		<!--  AdRiver code START. Type:AjaxJS Site: habrahabr PZ: 0 BN: 2 -->

<div id="adriver_banner_480931290" class="adbanner"></div>


<script type="text/javascript">
    function show_bn2_block(name, url){
        if( typeof(name) !== 'undefined'){
            $.get('/html/'+name+'/1435178010/', function(html){
                $('#adriver_banner_480931290').html(html);
                if( typeof(url) !== 'undefined'){
                    $('.'+name+'_inner_banner .block_url').attr('href', url);
                }
            })
        }
    }

    $(function(){

        var check_scroll_position = function() {
            var height = $(window).height();
            var scrollTop = $(window).scrollTop();
            var scrollBottom = $(window).scrollTop() + height;
            var blockTop = $('#adriver_banner_480931290').position().top;
            var show = scrollTop < blockTop && blockTop < scrollBottom;
            if( show ){
                $( window ).off('scroll', check_scroll_position);
                $( window ).trigger('show_bn2');
            }
        };

        $( window ).on('show_bn2', function(){
            var keyword = '';
            if (typeof crtg_content !== 'undefined' && crtg_content) { keyword = crtg_content; }
            var custom = {4:ar_duo1};
            custom[1] = 'sql';
            new adriver("adriver_banner_480931290", {sid: 176776, bt: 52, bn: 2, custom: custom, keyword: keyword});
        });

        //$( window ).on('scroll', check_scroll_position);
        $( window ).trigger('show_bn2');


    });
    </script>
<!--  AdRiver code END  -->

  		
<div class="block best_company">

		<div class="title">Компания дня <img src="/images/bg_cicle_help.png" title="
Компания, чья публикация набрала максимальное количество баллов<br>
среди всех опубликованных в корпоративных блогах публикаций за <br>
прошедшие сутки. Учитываются публикации, для которых истек срок голосования <br>(3 дня с момента публикации)." class="help-tip"></div>

		<div class="company_info">
			<div class="name">
			 <img class="favicon" src="//habrastorage.org/getpro/habr/companies/184/6b7/bc6/1846b7bc67936e5c6306f8bce338c75f_small.png" alt="Яндекс" height="16" width="16" />
			 <div class="company_name"><a href="http://habrahabr.ru/company/yandex/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'best_company', 'title'); }" class="title">Яндекс</a></div>
			</div>

			<p>Последняя публикация:
				<a href="http://habrahabr.ru/company/yandex/blog/260793/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'best_company', 'post'); }">Коллоквиумы на факультете Яндекса в Вышке: молекулярная биология</a>
			</p>

			<div class="buttons">
  			<div id="fans_count">15341 подписчик</div>
			</div>
		</div>

	</div>


  		
  		
  		
  </div>
  <div class="clear"></div>

  <script>
    // hubs to GA
      ga('send', 'event', 'Post_view', 'sql (SQL)',  window.location.pathname + window.location.search);
  </script>




        	
	<div class="rotated_posts">
			<div class="rotated_post ">
				<a href="http://habrahabr.ru/post/259191/" class="grey" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'posts_rotation_block'); }">Внезапный диван леопардовой расцветки</a>
			</div>
			<div class="rotated_post ">
				<a href="http://habrahabr.ru/company/serverclub/blog/250549/" class="grey" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'posts_rotation_block'); }">Загрузочный сервер — как загрузочная флешка, только сервер и по сети</a>
			</div>
			<div class="rotated_post last">
				<a href="http://habrahabr.ru/company/wargaming/blog/221035/" class="grey" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'posts_rotation_block'); }">Если вы решили перейти с PHP на Python, то к чему следует подготовиться</a>
			</div>
		<div class="clear"></div>
	</div>

        <div class="bottom_promo_blocks">
    <div class="left">
            
	<div class="block new_vacanies">
  <a href="http://brainstorage.me/jobs" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo" class="title">Brainstorage</a>
  <div class="vacancies">
		<div class="job_item marked">
			<a href="http://brainstorage.me/jobs/26677" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Senior PHP Developer</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/26105" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">.NET разработчик</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/29161" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Scala или Java разработчик / Scala or Java Developer</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/29163" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Ведущий Scala / Java разработчик (Senior Scala / Java Developer)</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/29165" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Руководитель отдела разработки / заместитель руководителя</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/30955" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Php-разработчик</a>
		</div>
		<div class="job_item marked">
			<a href="http://brainstorage.me/jobs/30035" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Ведущий разработчик Python/Django с широким кругозором</a>
		</div>
		<div class="job_item marked">
			<a href="http://brainstorage.me/jobs/14163" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Фронтенд-разработчик</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/29537" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Программист PHP</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/30943" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">Разработчик/Вебмастер CMS Wordpress</a>
		</div>
  </div>
  <div class="all"><a href="http://brainstorage.me/jobs" data-utm="?utm_source=tm_habrahabr&utm_medium=tm_block&utm_campaign=tm_promo">все вакансии</a></div>
</div>

    </div>
    <div class="right">
        
	<div class="block freelansim">
	  <a href="http://freelansim.ru" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim" class="title"></a>
	  <div class="tasks">
				<div class="task ">
					<a href="http://freelansim.ru/tasks/113997" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Веб-страница для загрузки файлов на Google Cloud Storage </a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/113987" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Мобильное приложение, iOS, Android для любительской футбольной команды</a>
				</div>
				<div class="task marked">
					<a href="http://freelansim.ru/tasks/113907" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Разработать проект игровой тематики CS:GO</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/113993" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Верстка крупного проекта</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/113985" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Ошибки в коде PHP</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/113983" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Доверстать проект</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/113981" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Подключить личный кабинет к сайту, поправить верстку</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/113979" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Доработать верстку на bootstrap и sass</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/113977" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Вёрстка шаблона для Wordpress</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/113973" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">Нестаднартный будильник под iOS</a>
				</div>

	  </div>
	  <div class="all"><a href="http://freelansim.ru/tasks" data-utm="?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=block_freelansim">все заказы</a></div>
	</div>

    </div>
    <div class="clear"></div>
</div>



        <div class="clear"></div>

        <div class="footer_panel">
          <div id="footer">
	<dl>
		<dd><a href="https://habrahabr.ru/auth/login/">Войти</a></dd>
		<dd><a href="https://habrahabr.ru/auth/register/">Регистрация</a></dd>
	</dl>
	<dl>
		<dt>Разделы</dt>
		<dd><a href="http://habrahabr.ru/posts/top/">Публикации</a></dd>
		<dd><a href="http://habrahabr.ru/hubs/">Хабы</a></dd>
		<dd><a href="http://habrahabr.ru/companies/">Компании</a></dd>
		<dd><a href="http://habrahabr.ru/users/">Пользователи</a></dd>
		<dd><a href="http://toster.ru/?_aa=press_anykey">Q&amp;A</a></dd>
		<dd><a href="http://habrahabr.ru/sandbox/">Песочница</a></dd>
		
	</dl>	
	<dl>
		<dt>Инфо</dt>
		<dd><a href="/info/about/">О сайте</a></dd>
		<dd><a href="/info/help/rules/">Правила</a></dd>
		<dd><a href="/info/help/">Помощь</a></dd>
		<dd><a href="/info/agreement/">Соглашение</a></dd>
	</dl>
	<dl>
		<dt>Услуги</dt>
		<dd><a href="http://special.habrahabr.ru/advertising/">Реклама</a></dd>
        <dd><a href="http://special.habrahabr.ru/">Спецпроекты</a></dd>
        <dd><a href="http://special.habrahabr.ru/corporate/">Тарифы</a></dd>
        <dd><a href="http://special.habrahabr.ru/content/">Контент</a></dd>
        <dd><a href="http://special.habrahabr.ru/workshops/">Семинары</a></dd>
	</dl>
	<dl>
		<dt>Разное</dt>
		<dd><a href="/apps/">Приложения</a></dd>
		<dd><a href="/special/testdrive/">Тест-драйвы</a></dd>
		<dd><a href="http://special.habrahabr.ru/hello_startup/habrahabr/">Помощь стартапам</a></dd>
	</dl>
	<div class="copyright">

		<div class="about">
			<a href="http://tmtm.ru/">© TM</a>
			
			<br><br>
			<a href="http://habrahabr.ru/feedback/">Служба поддержки</a><br><br>
                <a href="http://m.habrahabr.ru/post/43955/?mobile=yes">Мобильная версия</a><br><br>
			

			<div class="social_accounts">
				<a href="https://twitter.com/habrahabr" class="tw"></a>
				<a href="https://www.facebook.com/habrahabr.ru" class="fb"></a>
				<a href="http://vk.com/habr" class="vk"></a>
				<!-- <a href="" class="gp"></a> //-->
			</div>

		</div>
	</div>

</div>

        </div>
      </div>
    </div>


      <script type="text/javascript" src="/javascripts/1435178010/libs/jquery.cookie.js"></script>
      <script type="text/javascript">
        $(document).ready( function(){
          window.tmidLogin = function(){ return false; };
          if( $.cookie('tmid_no_check') == undefined ) {
            var expire = new Date();
            expire.setMinutes(expire.getMinutes() + 10 );
            $.cookie('tmid_no_check', 1, { expires: expire } );
            $.getScript("https://id.tmtm.ru/checklogin/", function(){
              if( window.tmidLogin() ) {

                  var href = $('#login').attr('href');

                  if( href !== undefined ) {
                      window.location.href = href;
                  }
              }
            });
          }
        });
      </script>

    <script type="text/javascript">
  // global vars
  var g_base_url = 'habrahabr.ru';
  var g_show_xpanel = false;
  var g_base_fullurl = 'http://habrahabr.ru/';
  var g_is_guest = false;
</script> 

      <script type="text/javascript" src="/javascripts/1435178010/assets/shortcuts.js"></script>

    <script type="text/javascript" src="/javascripts/1435178010/assets/global_footer_main.js"></script>

    	<script type="text/javascript" src="http://habrahabr.ru/viewcount/post/43955/"></script>

    

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter24049213 = new Ya.Metrika({id:24049213,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->



<!-- adriver counter //-->
<span style="position:absolute;left:-9999px;">
  <img src="http://ad.adriver.ru/cgi-bin/rle.cgi?sid=1&ad=505035&bt=21&pid=1844619&bid=3690116&bn=3690116&rnd=1193213628" width="1" height="1"  alt="" />
</span>
<!-- adriver counter end //-->

    <!-- Facebook Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
        n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
            document,'script','//connect.facebook.net/en_US/fbevents.js');

    fbq('init', '322477921209238');
    fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
               src="https://www.facebook.com/tr?id=322477921209238&ev=PageView&noscript=1"
        /></noscript>
<!-- End Facebook Pixel Code -->

    

    <!-- Хабр не резиновый! -->
  </body>
</html>
